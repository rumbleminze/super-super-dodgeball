; .segment "PRGA8"; Bank 7


; C000 - bank 7
.byte $00, $00, $04, $80, $08, $05, $04, $05, $08, $80, $0C, $06, $AD, $B0, $06, $F0
.byte $10, $0A, $AA, $24, $70, $50, $01, $E8, $BD, $00, $C0, $10, $01, $60, $4C, $4D
.byte $C0, $A9, $04, $20, $08, $FF, $20, $09, $80, $20, $0C, $80, $24, $70, $50, $06
.byte $20, $30, $80, $4C, $3C, $C0, $20, $0F, $80, $20, $12, $80, $20, $15, $80, $A9
.byte $06, $20, $08, $FF, $24, $70, $70, $03, $20, $24, $D0, $A9, $00, $85, $90, $A4
.byte $90, $20, $88, $C9, $A0, $00, $B1, $4D, $30, $03, $4C, $5F, $C1, $20, $F7, $E3
.byte $90, $09, $A5, $43, $09, $20, $85, $43, $4C, $5F, $C1, $A0, $37, $B1, $4D, $99
.byte $15, $00, $88, $10, $F8, $A5, $78, $29, $01, $D0, $7B, $A5, $78, $29, $04, $F0
.byte $62, $A5, $15, $29, $02, $D0, $6F, $A5, $16, $29, $01, $D0, $69, $AD, $13, $03
.byte $C9, $02, $90, $65, $A5, $1E, $29, $7F, $C9, $17, $F0, $5A, $C9, $18, $F0, $56
.byte $A2, $17, $24, $70, $50, $13, $A5, $17, $29, $20, $4A, $4A, $4A, $4A, $45, $78
.byte $29, $02, $F0, $24, $A2, $18, $4C, $D8, $C0, $A4, $90, $A5, $78, $59, $F3, $C1
.byte $29, $02, $F0, $05, $A2, $18, $4C, $D8, $C0, $24, $70, $70, $0B, $24, $17, $50
.byte $07, $A9, $00, $85, $15, $4C, $F6, $C0, $86, $1E, $A9, $80, $85, $1B, $85, $1F
.byte $4C, $F6, $C0, $20, $AE, $FA, $24, $78, $50, $03, $20, $2D, $C2, $20, $FF, $C1
.byte $20, $00, $80, $20, $00, $8E, $20, $68, $FB, $A5, $43, $29, $1F, $85, $43, $A5


; C100 - bank 7
.byte $15, $29, $02, $D0, $46, $A5, $78, $29, $04, $D0, $40, $24, $16, $10, $06, $A5
.byte $43, $09, $80, $85, $43, $A5, $78, $29, $01, $D0, $13, $A5, $15, $29, $40, $F0
.byte $0D, $AD, $9E, $06, $29, $02, $D0, $06, $A5, $43, $09, $40, $85, $43, $A5, $90
.byte $C5, $8D, $D0, $17, $A5, $C5, $29, $7F, $F0, $04, $C9, $04, $D0, $0D, $AD, $9E
.byte $06, $29, $01, $F0, $06, $A5, $43, $09, $20, $85, $43, $A5, $90, $20, $2D, $E3
.byte $A4, $90, $20, $88, $C9, $A0, $37, $B9, $15, $00, $91, $4D, $88, $10, $F8, $E6
.byte $90, $AD, $B0, $06, $0A, $AA, $24, $70, $50, $01, $E8, $A5, $90, $DD, $06, $C0
.byte $B0, $03, $4C, $4F, $C0, $AD, $B0, $06, $C9, $02, $F0, $01, $60, $A5, $78, $29
.byte $04, $D0, $60, $24, $70, $50, $12, $A2, $01, $B5, $80, $F0, $12, $C9, $02, $B0
.byte $55, $A2, $00, $B5, $80, $F0, $08, $D0, $4D, $A2, $01, $B5, $80, $D0, $30, $8A
.byte $49, $01, $0A, $09, $04, $05, $78, $29, $DF, $85, $78, $24, $76, $10, $07, $A9
.byte $C0, $85, $76, $4C, $D4, $C1, $E0, $00, $D0, $12, $AD, $71, $00, $C9, $07, $D0
.byte $0B, $AD, $81, $00, $C9, $03, $D0, $04, $A9, $80, $85, $76, $4C, $D4, $C1, $CA
.byte $10, $C9, $30, $12, $A9, $01, $8D, $13, $03, $A9, $00, $8D, $9E, $06, $A9, $2E
.byte $20, $15, $FA, $20, $64, $CE, $A5, $78, $29, $01, $D0, $06, $A5, $78, $29, $BF
.byte $85, $78, $60, $00, $00, $00, $00, $00, $00, $02, $02, $02, $02, $02, $02, $A5


; C200 - bank 7
.byte $15, $29, $F7, $85, $15, $A5, $E1, $85, $61, $A5, $E2, $85, $62, $A5, $E4, $85
.byte $63, $A5, $E5, $85, $64, $20, $0C, $CA, $38, $E5, $2E, $10, $05, $49, $FF, $18
.byte $69, $01, $C9, $50, $B0, $06, $A5, $15, $09, $08, $85, $15, $60, $A5, $15, $29
.byte $02, $D0, $52, $24, $70, $70, $4F, $20, $A2, $C2, $A0, $05, $A5, $C5, $29, $7F
.byte $D0, $08, $A5, $8A, $C9, $FF, $D0, $0E, $F0, $38, $C9, $03, $D0, $08, $A5, $CC
.byte $C9, $FF, $D0, $02, $F0, $2C, $A0, $04, $24, $16, $30, $08, $A0, $00, $24, $15
.byte $70, $20, $50, $0A, $A5, $17, $29, $20, $F0, $18, $A0, $00, $F0, $14, $A0, $01
.byte $24, $17, $70, $0E, $24, $16, $70, $0A, $A0, $02, $A5, $15, $29, $01, $F0, $02
.byte $A0, $03, $98, $85, $1A, $60, $A0, $05, $A5, $8A, $C9, $FF, $F0, $10, $A0, $06
.byte $A5, $17, $29, $20, $D0, $08, $A0, $07, $24, $16, $10, $02, $A0, $08, $98, $85
.byte $1A, $60, $A5, $C5, $29, $7F, $D0, $08, $A5, $8A, $C9, $FF, $F0, $2A, $D0, $10
.byte $C9, $03, $D0, $0C, $A5, $CC, $C9, $FF, $F0, $1E, $A4, $8A, $C0, $FF, $F0, $02
.byte $A5, $8A, $A2, $00, $C9, $06, $90, $01, $E8, $8A, $45, $18, $29, $01, $85, $4D
.byte $A5, $15, $29, $FE, $05, $4D, $85, $15, $60, $24, $70, $50, $0C, $A2, $00, $86
.byte $03, $86, $05, $A9, $06, $85, $04, $D0, $19, $A5, $C6, $C9, $06, $B0, $01, $60
.byte $A2, $03, $C9, $06, $F0, $02, $A2, $09, $86, $03, $A2, $00, $86, $05, $A0, $03


; C300 - bank 7
.byte $84, $04, $A5, $E1, $85, $65, $A5, $E2, $85, $66, $A5, $E4, $85, $67, $A5, $E5
.byte $85, $68, $A4, $03, $20, $88, $C9, $24, $70, $50, $08, $A0, $02, $B1, $4D, $29
.byte $20, $D0, $53, $A0, $00, $B1, $4D, $10, $4D, $29, $02, $D0, $49, $A0, $04, $B1
.byte $4D, $F0, $43, $A0, $30, $B1, $4D, $85, $61, $C8, $B1, $4D, $85, $62, $C8, $C8
.byte $B1, $4D, $85, $63, $C8, $B1, $4D, $85, $64, $20, $2B, $CA, $48, $A4, $03, $20
.byte $88, $C9, $68, $C9, $20, $90, $0C, $C9, $60, $90, $0D, $C9, $A0, $90, $04, $C9
.byte $E0, $90, $05, $A0, $12, $4C, $6A, $C3, $A0, $11, $B1, $4D, $A4, $03, $94, $06
.byte $E8, $95, $06, $E8, $E6, $05, $E6, $03, $C6, $04, $D0, $96, $A5, $05, $F0, $61
.byte $20, $2D, $C4, $A5, $05, $C9, $01, $F0, $58, $A9, $FF, $85, $00, $A2, $00, $B4
.byte $06, $20, $88, $C9, $A0, $00, $B1, $4D, $29, $04, $D0, $0E, $A5, $00, $F0, $0A
.byte $A9, $00, $85, $00, $A0, $0E, $91, $4D, $D0, $22, $24, $70, $50, $18, $8A, $48
.byte $B5, $07, $48, $A0, $02, $B1, $4D, $29, $07, $AA, $68, $DD, $E2, $C3, $68, $AA
.byte $B0, $04, $A9, $01, $D0, $02, $A9, $FF, $A0, $0E, $91, $4D, $E8, $E8, $C6, $05
.byte $D0, $BD, $A5, $00, $F0, $0B, $A4, $06, $20, $88, $C9, $A0, $0E, $A9, $00, $91
.byte $4D, $60, $FF, $FF, $E0, $A0, $FF, $FF, $A5, $8F, $C9, $FF, $D0, $0D, $A9, $04
.byte $20, $08, $FF, $20, $18, $80, $A9, $06, $20, $08, $FF, $A2, $00, $86, $02, $86


; C400 - bank 7
.byte $0E, $A0, $09, $A5, $17, $10, $04, $A2, $06, $A0, $03, $86, $00, $84, $01, $A9
.byte $03, $85, $03, $20, $A8, $C4, $A5, $8F, $85, $00, $A9, $01, $85, $03, $A9, $01
.byte $85, $0E, $20, $A8, $C4, $A9, $03, $85, $05, $20, $2D, $C4, $60, $A5, $05, $C9
.byte $01, $F0, $56, $85, $00, $C6, $00, $A9, $00, $85, $01, $18, $69, $02, $85, $02
.byte $A5, $00, $85, $03, $A6, $02, $E8, $B5, $06, $A6, $01, $E8, $D5, $06, $B0, $28
.byte $A6, $02, $B5, $06, $E8, $B4, $06, $8D, $CB, $06, $8C, $CC, $06, $A6, $01, $B5
.byte $06, $E8, $B4, $06, $A6, $02, $95, $06, $E8, $94, $06, $A6, $01, $AD, $CB, $06
.byte $AC, $CC, $06, $95, $06, $E8, $94, $06, $E6, $02, $E6, $02, $C6, $03, $D0, $C4
.byte $A5, $01, $18, $69, $02, $C6, $00, $D0, $B0, $A9, $00, $85, $03, $AA, $A5, $05
.byte $48, $B4, $06, $20, $88, $C9, $A0, $0E, $A5, $03, $91, $4D, $E8, $E8, $E6, $03
.byte $C6, $05, $D0, $ED, $68, $85, $05, $60, $A4, $00, $C4, $90, $D0, $03, $4C, $45
.byte $C5, $20, $88, $C9, $A5, $4D, $85, $63, $A5, $4E, $85, $64, $A9, $03, $85, $04
.byte $A9, $00, $85, $0C, $85, $61, $85, $62, $A5, $01, $85, $0D, $A4, $0D, $20, $88
.byte $C9, $A0, $00, $B1, $4D, $10, $53, $29, $02, $D0, $4F, $A0, $33, $A5, $03, $C9
.byte $01, $D0, $16, $A0, $30, $A5, $0E, $F0, $08, $A5, $00, $C9, $06, $B0, $1E, $90
.byte $0C, $A5, $00, $C9, $02, $F0, $16, $D0, $04, $C9, $02, $F0, $10, $B1, $63, $38


; C500 - bank 7
.byte $F1, $4D, $85, $65, $C8, $B1, $63, $F1, $4D, $85, $66, $10, $0E, $B1, $4D, $38
.byte $F1, $63, $85, $65, $C8, $B1, $4D, $F1, $63, $85, $66, $A5, $61, $18, $65, $65
.byte $85, $61, $A5, $62, $65, $66, $85, $62, $E6, $0C, $E6, $0D, $C6, $04, $D0, $9C
.byte $A5, $0C, $85, $4D, $20, $6D, $DC, $A5, $61, $A6, $02, $A4, $00, $94, $06, $E8
.byte $95, $06, $E8, $86, $02, $E6, $00, $C6, $03, $F0, $03, $4C, $A8, $C4, $60, $80
.byte $40, $03, $06, $09, $0C, $85, $51, $8A, $48, $A9, $00, $85, $53, $A9, $00, $85
.byte $4F, $BD, $12, $C6, $85, $50, $0A, $0A, $85, $52, $A4, $50, $20, $88, $C9, $A0
.byte $00, $B1, $4D, $30, $03, $4C, $EE, $C5, $29, $06, $F0, $03, $4C, $EE, $C5, $20
.byte $14, $C6, $A6, $52, $A5, $67, $38, $F5, $92, $85, $4D, $A5, $68, $F5, $93, $10
.byte $0F, $48, $A5, $4D, $49, $FF, $18, $69, $01, $85, $4D, $68, $49, $FF, $69, $00
.byte $29, $FF, $D0, $04, $A5, $4D, $10, $02, $A9, $80, $20, $CE, $DC, $A5, $66, $48
.byte $20, $3F, $C6, $A5, $67, $38, $F5, $94, $85, $4D, $A5, $68, $E9, $00, $10, $0F
.byte $48, $A5, $4D, $49, $FF, $18, $69, $01, $85, $4D, $68, $49, $FF, $69, $00, $29
.byte $FF, $D0, $04, $A5, $4D, $10, $02, $A9, $80, $20, $CE, $DC, $68, $18, $65, $66
.byte $48, $A5, $53, $0A, $AA, $A5, $50, $95, $55, $68, $95, $56, $E6, $53, $A5, $52
.byte $18, $69, $04, $85, $52, $E6, $50, $E6, $4F, $A5, $4F, $C9, $03, $B0, $03, $4C


; C600 - bank 7
.byte $6A, $C5, $A9, $FF, $A4, $53, $F0, $03, $20, $6A, $C6, $85, $4D, $68, $AA, $A5
.byte $4D, $60, $03, $09, $A5, $51, $D0, $11, $A4, $8D, $20, $88, $C9, $A0, $30, $B1
.byte $4D, $85, $67, $C8, $B1, $4D, $85, $68, $60, $C9, $01, $D0, $09, $A5, $C7, $85
.byte $67, $A5, $C8, $85, $68, $60, $A5, $E1, $85, $67, $A5, $E2, $85, $68, $60, $A5
.byte $51, $D0, $11, $A4, $8D, $20, $88, $C9, $A0, $33, $B1, $4D, $85, $67, $C8, $B1
.byte $4D, $85, $68, $60, $C9, $01, $D0, $09, $A5, $C9, $85, $67, $A5, $CA, $85, $68
.byte $60, $A5, $E4, $85, $67, $A5, $E5, $85, $68, $60, $C6, $53, $F0, $30, $30, $2E
.byte $A9, $00, $85, $54, $A2, $00, $B5, $58, $D5, $56, $B0, $16, $B5, $55, $48, $B5
.byte $56, $48, $B5, $57, $95, $55, $B5, $58, $95, $56, $68, $95, $58, $68, $95, $57
.byte $E6, $54, $E8, $E8, $8A, $4A, $C5, $53, $90, $DC, $A5, $54, $D0, $D2, $A5, $55
.byte $60, $AD, $0E, $C7, $85, $00, $A0, $00, $B9, $0F, $C7, $C5, $01, $B0, $09, $C6
.byte $00, $F0, $05, $C8, $C8, $C8, $10, $F0, $98, $86, $00, $18, $65, $00, $A8, $B9
.byte $0F, $C7, $CA, $60, $AD, $0E, $C7, $85, $00, $A0, $00, $B9, $0F, $C7, $C5, $48
.byte $B0, $09, $C6, $00, $F0, $05, $C8, $C8, $C8, $10, $F0, $98, $86, $00, $18, $65
.byte $00, $A8, $B9, $0F, $C7, $CA, $60, $AD, $0E, $C7, $85, $00, $8A, $A8, $B9, $0F
.byte $C7, $C5, $45, $F0, $09, $C6, $00, $F0, $05, $C8, $C8, $C8, $10, $F0, $98, $86


; C700 - bank 7
.byte $00, $38, $E5, $00, $A8, $B9, $0F, $C7, $38, $E9, $04, $A2, $00, $60, $1E, $13
.byte $34, $CC, $16, $35, $CB, $19, $36, $CA, $1C, $37, $C9, $1F, $38, $C8, $22, $39
.byte $C7, $25, $3A, $C6, $28, $3B, $C5, $2B, $3C, $C4, $2E, $3D, $C3, $31, $3E, $C2
.byte $34, $3F, $C1, $37, $40, $C0, $3A, $41, $BF, $3D, $42, $BE, $40, $43, $BD, $43
.byte $44, $BC, $46, $45, $BB, $49, $46, $BA, $4C, $47, $B9, $4F, $48, $B8, $52, $49
.byte $B7, $55, $4A, $B6, $58, $4B, $B5, $5B, $4C, $B4, $5E, $4D, $B3, $61, $4E, $B2
.byte $64, $4F, $B1, $67, $50, $B0, $6A, $51, $AF, $AE, $0E, $C7, $A0, $00, $B9, $0F
.byte $C7, $C5, $63, $B0, $08, $CA, $F0, $06, $C8, $C8, $C8, $10, $F1, $CA, $8A, $60
.byte $24, $70, $50, $01, $60, $A5, $18, $C9, $04, $10, $3A, $48, $A5, $D3, $29, $3F
.byte $D0, $10, $68, $A2, $02, $A0, $49, $84, $61, $A0, $C8, $84, $62, $A0, $04, $4C
.byte $28, $C8, $68, $A8, $A2, $C8, $86, $61, $A2, $C8, $86, $62, $C9, $00, $F0, $10
.byte $A9, $18, $18, $65, $61, $85, $61, $A5, $62, $69, $00, $85, $62, $88, $D0, $EC
.byte $A0, $06, $4C, $61, $C8, $C9, $06, $30, $35, $48, $A5, $D3, $29, $3F, $D0, $10
.byte $68, $A2, $04, $A0, $51, $84, $61, $A0, $C8, $84, $62, $A0, $08, $4C, $28, $C8
.byte $68, $A2, $28, $86, $61, $A2, $C9, $86, $62, $4A, $B0, $0D, $18, $A5, $61, $69
.byte $18, $85, $61, $A5, $62, $69, $00, $85, $62, $A0, $06, $4C, $61, $C8, $A5, $D3


; C800 - bank 7
.byte $29, $3F, $D0, $05, $A5, $8F, $4C, $B9, $C8, $A2, $58, $86, $61, $A2, $C9, $86
.byte $62, $A5, $18, $4A, $90, $0D, $18, $A5, $61, $69, $18, $85, $61, $A5, $62, $69
.byte $00, $85, $62, $A0, $06, $4C, $61, $C8, $84, $00, $4A, $A0, $00, $90, $02, $A4
.byte $00, $A5, $D3, $D1, $61, $F0, $06, $C8, $C8, $CA, $D0, $F7, $60, $C8, $B1, $61
.byte $C9, $FF, $D0, $02, $A5, $8F, $4C, $B9, $C8, $80, $01, $00, $00, $80, $07, $00
.byte $06, $00, $06, $40, $08, $80, $07, $C0, $02, $00, $00, $40, $08, $80, $01, $C0
.byte $02, $A5, $D3, $2A, $2A, $2A, $29, $03, $84, $00, $A8, $08, $A9, $00, $28, $F0
.byte $06, $18, $65, $00, $88, $D0, $FA, $18, $65, $61, $85, $61, $A5, $62, $69, $00
.byte $85, $62, $48, $A5, $61, $48, $A0, $03, $B1, $61, $85, $64, $88, $B1, $61, $85
.byte $63, $88, $B1, $61, $48, $88, $B1, $61, $85, $61, $68, $85, $62, $20, $0F, $CA
.byte $85, $00, $68, $85, $61, $68, $85, $62, $A0, $04, $A5, $D3, $C5, $00, $B0, $01
.byte $C8, $B1, $61, $C9, $FF, $D0, $02, $A5, $8F, $48, $A8, $20, $88, $C9, $A0, $00
.byte $B1, $4D, $09, $10, $91, $4D, $68, $60, $00, $00, $00, $00, $00, $00, $10, $01
.byte $10, $00, $01, $FF, $2C, $00, $10, $00, $02, $01, $00, $00, $00, $00, $00, $00
.byte $00, $00, $00, $00, $00, $00, $D4, $01, $10, $00, $07, $08, $F0, $00, $10, $00
.byte $FF, $07, $00, $00, $00, $00, $00, $00, $10, $01, $6A, $00, $FF, $00, $00, $00


; C900 - bank 7
.byte $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $49, $00, $6A, $00, $00, $02
.byte $B7, $01, $6A, $00, $08, $06, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
.byte $00, $00, $F0, $00, $6A, $00, $06, $FF, $B7, $01, $6A, $00, $08, $06, $D4, $01
.byte $10, $00, $07, $08, $00, $01, $10, $00, $01, $07, $00, $01, $6A, $00, $06, $00
.byte $00, $01, $6A, $00, $06, $00, $00, $01, $10, $00, $01, $07, $2C, $00, $10, $00
.byte $02, $01, $2C, $00, $6A, $00, $00, $02, $10, $01, $6A, $00, $FF, $00, $10, $01
.byte $10, $00, $01, $FF, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
.byte $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $F0, $00, $10, $00
.byte $FF, $07, $F0, $00, $6A, $00, $06, $FF, $48, $98, $0A, $A8, $B9, $98, $C9, $85
.byte $4D, $B9, $99, $C9, $85, $4E, $68, $60, $1F, $03, $57, $03, $8F, $03, $C7, $03
.byte $FF, $03, $37, $04, $6F, $04, $A7, $04, $DF, $04, $17, $05, $4F, $05, $87, $05
.byte $85, $01, $4C, $BC, $C9, $85, $01, $20, $89, $DB, $85, $00, $A5, $00, $29, $1F
.byte $EA, $EA, $EA, $C5, $01, $90, $03, $38, $B0, $01, $18, $60, $38, $B0, $01, $18
.byte $85, $00, $8A, $48, $98, $48, $08, $A4, $00, $C0, $FF, $D0, $13, $A9, $00, $85
.byte $61, $A9, $01, $85, $62, $A9, $98, $85, $63, $A9, $00, $85, $64, $4C, $15, $CA
.byte $20, $88, $C9, $A0, $30, $B1, $4D, $85, $61, $C8, $B1, $4D, $85, $62, $C8, $C8


; CA00 - bank 7
.byte $B1, $4D, $85, $63, $C8, $B1, $4D, $85, $64, $4C, $15, $CA, $38, $B0, $01, $18
.byte $8A, $48, $98, $48, $08, $A5, $45, $85, $65, $A5, $46, $85, $66, $A5, $48, $85
.byte $67, $A5, $49, $85, $68, $4C, $31, $CA, $38, $B0, $01, $18, $8A, $48, $98, $48
.byte $08, $A9, $00, $85, $50, $38, $A5, $61, $E5, $65, $85, $51, $A5, $62, $E5, $66
.byte $85, $52, $10, $16, $49, $FF, $85, $52, $A5, $51, $49, $FF, $69, $01, $85, $51
.byte $A5, $52, $69, $00, $85, $52, $A9, $01, $85, $50, $A9, $00, $85, $4D, $38, $A5
.byte $63, $E5, $67, $85, $4E, $A5, $64, $E5, $68, $85, $4F, $10, $16, $49, $FF, $85
.byte $4F, $A5, $4E, $49, $FF, $69, $01, $85, $4E, $A5, $4F, $69, $00, $85, $4F, $A9
.byte $01, $85, $4D, $A5, $4D, $0A, $05, $50, $85, $54, $28, $90, $45, $A5, $4E, $E5
.byte $51, $85, $00, $A5, $4F, $E5, $52, $85, $01, $A6, $54, $BD, $DE, $CA, $85, $02
.byte $B0, $1B, $A9, $04, $05, $54, $85, $54, $A5, $4F, $D0, $06, $A9, $08, $C5, $4E
.byte $B0, $11, $A5, $02, $49, $FF, $18, $69, $01, $85, $02, $D0, $0A, $A9, $03, $C5
.byte $00, $B0, $04, $A9, $00, $85, $02, $A6, $54, $BD, $5D, $CB, $18, $65, $02, $4C
.byte $D5, $CA, $20, $E2, $CA, $85, $02, $68, $A8, $68, $AA, $A5, $02, $60, $20, $E0
.byte $E0, $20, $A5, $61, $48, $A5, $62, $48, $A5, $63, $48, $A5, $64, $48, $A5, $4E
.byte $38, $E5, $51, $A5, $4F, $E5, $52, $90, $0D, $A5, $4E, $85, $63, $A5, $4F, $A6


; CB00 - bank 7
.byte $51, $A4, $52, $4C, $16, $CB, $A9, $04, $05, $54, $85, $54, $A5, $51, $85, $63
.byte $A5, $52, $A6, $4E, $A4, $4F, $85, $64, $86, $61, $84, $62, $A0, $04, $06, $61
.byte $26, $62, $88, $10, $F9, $A5, $65, $48, $A5, $66, $48, $20, $16, $DC, $68, $85
.byte $66, $68, $85, $65, $A6, $54, $A5, $61, $BC, $55, $CB, $F0, $05, $49, $FF, $18
.byte $69, $01, $18, $7D, $5D, $CB, $AA, $68, $85, $64, $68, $85, $63, $68, $85, $62
.byte $68, $85, $61, $8A, $60, $00, $01, $01, $00, $01, $00, $00, $01, $00, $00, $80
.byte $80, $40, $C0, $40, $C0, $85, $00, $8A, $48, $98, $48, $A4, $00, $20, $88, $C9
.byte $A0, $30, $B1, $4D, $85, $61, $C8, $B1, $4D, $85, $62, $C8, $C8, $B1, $4D, $85
.byte $63, $C8, $B1, $4D, $85, $64, $4C, $8D, $CB, $8A, $48, $98, $48, $A2, $02, $86
.byte $00, $A5, $64, $30, $18, $A2, $00, $86, $00, $A5, $64, $D0, $10, $A5, $63, $C9
.byte $68, $B0, $0A, $A2, $02, $86, $00, $C9, $18, $90, $02, $06, $00, $A5, $62, $30
.byte $2F, $F0, $02, $E6, $00, $A5, $00, $C9, $04, $90, $25, $4A, $B0, $0F, $A2, $01
.byte $20, $E7, $CB, $C5, $61, $B0, $19, $A9, $07, $85, $00, $D0, $13, $A5, $62, $C9
.byte $01, $D0, $0D, $A2, $02, $20, $E7, $CB, $C5, $61, $F0, $04, $90, $02, $E6, $00
.byte $68, $A8, $68, $AA, $A5, $00, $60, $AD, $0A, $CC, $85, $01, $A0, $00, $B9, $0B
.byte $CC, $C5, $63, $B0, $09, $C6, $01, $F0, $05, $C8, $C8, $C8, $10, $F0, $98, $86


; CC00 - bank 7
.byte $01, $18, $65, $01, $A8, $B9, $0B, $CC, $CA, $60, $1B, $19, $3F, $C1, $1C, $40
.byte $C0, $1F, $41, $BF, $22, $42, $BE, $25, $43, $BD, $28, $44, $BC, $2B, $45, $BB
.byte $2E, $46, $BA, $31, $47, $B9, $34, $48, $B8, $37, $49, $B7, $3A, $4A, $B6, $3D
.byte $4B, $B5, $40, $4C, $B4, $43, $4D, $B3, $46, $4E, $B2, $49, $4F, $B1, $4C, $50
.byte $B0, $4F, $51, $AF, $52, $52, $AE, $55, $53, $AD, $58, $54, $AC, $5B, $55, $AB
.byte $5E, $56, $AA, $61, $57, $A9, $64, $58, $A8, $67, $59, $A7, $A5, $37, $85, $4D
.byte $A5, $38, $85, $4E, $20, $00, $CD, $A5, $61, $85, $39, $18, $65, $44, $85, $44
.byte $A5, $62, $85, $3A, $08, $65, $45, $85, $45, $A5, $46, $69, $00, $28, $10, $03
.byte $18, $69, $FF, $85, $46, $A5, $63, $85, $3B, $18, $65, $47, $85, $47, $A5, $64
.byte $85, $3C, $08, $65, $48, $85, $48, $A5, $49, $69, $00, $28, $10, $03, $18, $69
.byte $FF, $85, $49, $60, $A5, $3D, $38, $E5, $3F, $85, $3D, $A5, $3E, $E5, $40, $85
.byte $3E, $A5, $47, $18, $65, $3B, $85, $47, $A5, $3C, $08, $65, $48, $85, $48, $A5
.byte $49, $69, $00, $28, $10, $03, $18, $69, $FF, $85, $49, $A5, $4A, $18, $65, $3D
.byte $85, $4A, $A5, $3E, $08, $65, $4B, $85, $4B, $A5, $4C, $69, $00, $28, $10, $03
.byte $18, $69, $FF, $85, $4C, $A5, $39, $18, $65, $44, $85, $44, $A5, $3A, $08, $65
.byte $45, $85, $45, $A5, $46, $69, $00, $28, $10, $03, $18, $69, $FF, $85, $46, $60


; CD00 - bank 7
.byte $48, $8A, $48, $98, $48, $20, $11, $CD, $20, $42, $CD, $68, $A8, $68, $AA, $68
.byte $60, $A5, $4D, $29, $60, $4A, $4A, $4A, $4A, $A8, $BE, $3A, $CD, $B9, $3B, $CD
.byte $08, $A5, $4D, $29, $1F, $95, $4F, $28, $10, $07, $A9, $20, $38, $F5, $4F, $95
.byte $4F, $8A, $49, $01, $AA, $A9, $20, $95, $4F, $60, $00, $00, $01, $FF, $01, $00
.byte $00, $FF, $A2, $00, $A0, $00, $A9, $00, $85, $62, $85, $64, $B5, $4F, $85, $61
.byte $A5, $4E, $85, $63, $20, $97, $DC, $A5, $65, $99, $51, $00, $A5, $66, $99, $52
.byte $00, $C8, $C8, $E8, $E0, $02, $90, $DE, $A2, $03, $B5, $51, $95, $61, $CA, $10
.byte $F9, $A5, $4D, $29, $C0, $4A, $4A, $4A, $4A, $4A, $A8, $A2, $00, $B9, $9B, $CD
.byte $10, $11, $B5, $61, $49, $FF, $18, $69, $01, $95, $61, $B5, $62, $49, $FF, $69
.byte $00, $95, $62, $C8, $E8, $E8, $E0, $04, $90, $E3, $60, $00, $00, $00, $FF, $FF
.byte $FF, $FF, $00, $AD, $B2, $06, $30, $01, $60, $A5, $78, $29, $08, $F0, $06, $A5
.byte $24, $85, $4F, $D0, $42, $A5, $78, $09, $08, $85, $78, $A5, $70, $29, $60, $F0
.byte $2C, $24, $70, $50, $18, $AE, $6F, $00, $E0, $01, $F0, $06, $20, $AA, $CF, $4C
.byte $D5, $CD, $AC, $86, $00, $84, $4F, $20, $88, $C9, $4C, $28, $CE, $A0, $0B, $20
.byte $89, $DB, $29, $01, $F0, $02, $A0, $05, $84, $4F, $4C, $F7, $CD, $A0, $0B, $A5
.byte $7B, $30, $02, $A0, $05, $84, $4F, $A9, $03, $85, $50, $A5, $4F, $29, $02, $4A


; CE00 - bank 7
.byte $AA, $A4, $4F, $20, $88, $C9, $A0, $00, $B1, $4D, $10, $4F, $B5, $80, $C9, $02
.byte $90, $16, $B1, $4D, $29, $06, $D0, $43, $A0, $06, $B1, $4D, $29, $7F, $C9, $0B
.byte $F0, $39, $A0, $34, $B1, $4D, $D0, $33, $A0, $01, $B1, $4D, $09, $80, $91, $4D
.byte $A5, $78, $09, $40, $85, $78, $AD, $B2, $06, $29, $7F, $8D, $B2, $06, $A5, $4F
.byte $85, $8A, $A9, $00, $85, $C5, $24, $70, $70, $19, $A0, $19, $A5, $4F, $29, $08
.byte $D0, $04, $A9, $C0, $D0, $02, $A9, $40, $91, $4D, $60, $E6, $4F, $C6, $50, $D0
.byte $A0, $F0, $C5, $60, $AD, $13, $03, $D0, $01, $60, $C9, $01, $D0, $37, $A2, $0B
.byte $24, $70, $50, $02, $A2, $05, $86, $4F, $A5, $4F, $20, $4F, $8A, $A0, $00, $B1
.byte $4D, $10, $0C, $29, $02, $D0, $12, $A0, $01, $B1, $4D, $29, $01, $D0, $09, $C6
.byte $4F, $10, $E5, $A9, $02, $8D, $13, $03, $60, $AD, $9E, $06, $C9, $1E, $90, $04
.byte $A9, $00, $91, $4D, $60, $C9, $02, $D0, $20, $20, $1A, $CF, $A9, $01, $85, $C5
.byte $20, $2B, $CF, $20, $BC, $FE, $A9, $03, $8D, $13, $03, $20, $01, $CF, $A9, $00
.byte $8D, $9E, $06, $A9, $10, $8D, $E2, $07, $60, $A5, $71, $C9, $07, $D0, $0F, $24
.byte $76, $70, $0B, $A5, $81, $C9, $03, $D0, $05, $A9, $80, $8D, $E0, $07, $20, $A1
.byte $CF, $29, $C0, $D0, $07, $AD, $00, $07, $29, $02, $D0, $14, $A5, $78, $29, $02
.byte $4A, $85, $4D, $A5, $78, $05, $4D, $09, $80, $85, $78, $A9, $00, $8D, $E0, $07


; CF00 - bank 7
.byte $60, $24, $70, $70, $06, $A5, $70, $29, $20, $D0, $08, $A2, $23, $A5, $78, $29
.byte $02, $F0, $02, $A2, $22, $8A, $20, $15, $FA, $60, $A9, $F0, $8D, $04, $02, $8D
.byte $08, $02, $A9, $00, $8D, $68, $01, $8D, $69, $01, $60, $AD, $7B, $00, $29, $0F
.byte $48, $AD, $7A, $00, $29, $0F, $A8, $68, $18, $79, $47, $CF, $A8, $B9, $50, $CF
.byte $8D, $AE, $06, $8D, $AF, $06, $60, $00, $09, $12, $1B, $24, $2D, $36, $3F, $48
.byte $0C, $17, $0C, $0C, $0C, $17, $0C, $17, $0C, $17, $17, $17, $17, $17, $17, $17
.byte $17, $17, $0C, $17, $0C, $0C, $0C, $17, $0C, $17, $0C, $0C, $17, $0C, $0C, $0C
.byte $17, $0C, $17, $0C, $0C, $17, $0C, $0C, $0C, $17, $0C, $17, $0C, $17, $17, $17
.byte $17, $17, $17, $17, $17, $17, $0C, $17, $0C, $0C, $0C, $17, $0C, $17, $0C, $17
.byte $17, $17, $17, $17, $17, $17, $17, $17, $0C, $17, $0C, $0C, $0C, $17, $0C, $17
.byte $0C, $A5, $F5, $05, $F6, $05, $F7, $05, $F8, $60, $CA, $CA, $8A, $0A, $0A, $8D
.byte $B4, $06, $20, $89, $DB, $29, $03, $18, $6D, $B4, $06, $AA, $BD, $EA, $CF, $48
.byte $AA, $A9, $FD, $18, $7D, $F6, $CF, $85, $61, $A9, $CF, $69, $00, $85, $62, $A9
.byte $05, $85, $4F, $A4, $4F, $20, $88, $C9, $A4, $4F, $B1, $61, $A0, $19, $91, $4D
.byte $C6, $4F, $10, $EF, $68, $AA, $B5, $86, $A8, $60, $00, $01, $00, $01, $00, $01
.byte $02, $01, $00, $01, $02, $03, $00, $06, $0C, $12, $18, $1E, $24, $60, $C0, $20


; D000 - bank 7
.byte $C0, $00, $E0, $40, $C0, $40, $E0, $20, $00, $A0, $C0, $40, $C0, $E0, $C0, $40
.byte $60, $40, $C0, $40, $20, $80, $A0, $60, $C0, $40, $C0, $60, $80, $40, $A0, $40
.byte $E0, $4C, $5A, $D1, $A2, $01, $B5, $7A, $30, $03, $4C, $7F, $D1, $BD, $D7, $06
.byte $F0, $07, $DE, $D7, $06, $D0, $EA, $F0, $04, $24, $78, $50, $E4, $A5, $C5, $29
.byte $7F, $C9, $02, $F0, $04, $C9, $05, $D0, $04, $A5, $E7, $F0, $D4, $A5, $C5, $29
.byte $7F, $F0, $04, $C9, $03, $D0, $04, $A5, $8A, $30, $58, $A4, $8A, $8A, $D9, $86
.byte $D1, $D0, $0F, $A5, $C5, $29, $7F, $A8, $B9, $92, $D1, $F0, $41, $A5, $8A, $4C
.byte $B3, $D0, $A5, $C5, $29, $7F, $F0, $04, $C9, $04, $D0, $22, $A4, $8D, $30, $2E
.byte $8A, $D9, $9D, $D1, $D0, $28, $20, $88, $C9, $A0, $00, $B1, $4D, $29, $04, $D0
.byte $05, $A5, $8D, $4C, $B3, $D0, $A9, $00, $20, $55, $C5, $4C, $B3, $D0, $A5, $C5
.byte $29, $7F, $C9, $03, $D0, $08, $A9, $01, $20, $55, $C5, $4C, $B3, $D0, $A9, $02
.byte $20, $55, $C5, $D5, $86, $D0, $03, $4C, $5A, $D1, $48, $8A, $49, $01, $AA, $0A
.byte $A8, $A9, $00, $9D, $6A, $01, $99, $72, $01, $99, $73, $01, $9D, $E7, $07, $9D
.byte $0C, $03, $9D, $04, $03, $A9, $FF, $9D, $00, $03, $8A, $49, $01, $AA, $B4, $86
.byte $30, $4B, $20, $88, $C9, $A0, $00, $B1, $4D, $29, $BF, $91, $4D, $86, $6A, $29
.byte $01, $AA, $A0, $02, $B1, $4D, $29, $40, $F0, $02, $E8, $E8, $BD, $99, $D1, $A0


; D100 - bank 7
.byte $05, $91, $4D, $C9, $03, $D0, $04, $A9, $00, $85, $1C, $A6, $6A, $A0, $00, $B1
.byte $4D, $29, $06, $D0, $18, $A0, $01, $B1, $4D, $29, $0B, $D0, $10, $A0, $06, $B1
.byte $4D, $29, $7F, $C9, $1E, $D0, $06, $A0, $0A, $A9, $00, $91, $4D, $68, $95, $86
.byte $30, $28, $A8, $20, $88, $C9, $A0, $00, $B1, $4D, $09, $40, $91, $4D, $A0, $05
.byte $A9, $00, $91, $4D, $A0, $0A, $B1, $4D, $09, $80, $91, $4D, $A0, $09, $B1, $4D
.byte $29, $7F, $C9, $04, $D0, $04, $A9, $00, $91, $4D, $B4, $86, $30, $21, $20, $88
.byte $C9, $A0, $06, $B1, $4D, $29, $7F, $C9, $07, $F0, $08, $C9, $00, $F0, $04, $C9
.byte $0D, $D0, $0C, $A9, $00, $A0, $05, $91, $4D, $A0, $0A, $A9, $00, $91, $4D, $CA
.byte $30, $03, $4C, $26, $D0, $60, $00, $00, $00, $00, $00, $00, $01, $01, $01, $01
.byte $01, $01, $01, $00, $00, $01, $01, $00, $00, $02, $03, $01, $01, $FF, $FF, $FF
.byte $00, $00, $00, $FF, $FF, $FF, $01, $01, $01, $00, $00, $00, $00, $00, $00, $00
.byte $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
.byte $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
.byte $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
.byte $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
.byte $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00


; D200 - bank 7
.byte $86, $00, $20, $0E, $D2, $A6, $00, $BD, $95, $F2, $20, $E2, $FE, $60, $48, $AA
.byte $BD, $A9, $D3, $20, $E2, $FE, $68, $0A, $A8, $B9, $61, $D3, $85, $4D, $B9, $62
.byte $D3, $85, $4E, $A0, $00, $20, $46, $D3, $D0, $56, $C8, $20, $46, $D3, $C9, $00
.byte $D0, $01, $60, $29, $F0, $C9, $20, $D0, $24, $20, $46, $D3, $85, $54, $C8, $20
.byte $46, $D3, $85, $53, $C8, $20, $46, $D3, $85, $57

; update ppu control - doing nothing here _seems_ to be fine
  LDA $FF
  AND #$FB
  ORA $57
  STA $FF
;   STA $2000
  nops 3

.byte $A9, $04, $20, $3A, $D3, $4C, $23, $D2, $A5, $4D, $48
.byte $A5, $4E, $48, $20, $46, $D3, $AA, $C8, $20, $46, $D3, $85, $4D, $86, $4E, $20
.byte $23, $D2, $68, $85, $4E, $68, $85, $4D, $A9, $03, $20, $3A, $D3, $4C, $23, $D2
.byte $29, $C0, $C9, $00, $D0, $1B, $A9, $01, $85, $4F, $85, $51, $20, $46, $D3, $85
.byte $50, $A9, $01, $20, $3A, $D3, $20, $08, $D3, $A9, $01, $20, $3A, $D3, $4C, $23
.byte $D2, $C9, $40, $D0, $1D, $20, $46, $D3, $29, $3F, $85, $4F, $48, $A9, $01, $85
.byte $50, $85, $51, $A9, $01, $20, $3A, $D3, $20, $08, $D3, $68, $20, $3A, $D3, $4C
.byte $23, $D2, $C9, $80, $D0, $21, $20, $46, $D3, $29, $3F, $85, $50, $C8, $20, $46
.byte $D3, $85, $51, $A9, $01, $85, $4F, $A9, $02, $20, $3A, $D3, $20, $08, $D3, $A9
.byte $01, $20, $3A, $D3, $4C, $23, $D2, $20, $46, $D3, $29, $3F, $85, $4F, $48, $C8
.byte $20, $46, $D3, $85, $50, $A9, $01, $85, $51, $A9, $02, $20, $3A, $D3, $20, $08


; D300 - bank 7
.byte $D3, $68, $20, $3A, $D3, $4C, $23, $D2

; D308 - used to write background and attribute information 
;        on screen load.  uses data that has been stored in 50-57
;        that was loaded from VRAM
: LDX $50
: LDY #$00
: JSR $D346
  STA $57
;   LDA $54
;   STA VMADDH
;   LDA $53
;   STA VMADDL
;   LDA $57
;   STA VMDATAL
  JSL handle_ppu_write
  nops 11

  LDA $53
  CLC
  ADC #$01
  STA $53
  LDA $54
  ADC #$00
  STA $54
  INY
  CPY $4F
  BNE :-
  DEX
  BNE :--
  DEC $51
  BNE :---
  RTS


.byte $18, $65, $4D, $85, $4D, $A5
.byte $4E, $69, $00, $85, $4E, $60

; D346
  TYA
  CLC
  ADC $4D
  STA $55
  LDA $4E
  ADC #$60

;   JSL read_chr_data
;   nops 12
  STA $56
  STA VMADDH
  LDA $55
  STA VMADDL
  LDA VMDATALREAD
  LDA VMDATALREAD
  RTS

.byte $00, $10, $DA, $1A, $31, $15, $D7, $13, $B4, $14, $00, $10, $CC, $1A, $81
.byte $15, $00, $1B, $00, $10, $00, $10, $00, $10, $00, $10, $33, $17, $10, $1C, $F3
.byte $1C, $B9, $1E, $3D, $18, $6A, $1B, $C6, $1A, $CC, $1A, $33, $17, $00, $00, $00
.byte $00, $D5, $18, $A8, $1F, $00, $10, $B7, $12, $66, $15, $1D, $18, $00, $10, $B1
.byte $12, $CC, $1A, $23, $18, $66, $15, $00, $10, $1C, $1C, $1D, $1E, $1F, $1D, $1D
.byte $1C, $1B, $1F, $1E, $1F, $1F, $1E, $1E, $1E, $1E, $1E, $1E, $1E, $1D, $1E, $00
.byte $00, $1F, $1F, $1A, $1A, $1A, $1A, $1B, $1B, $1A, $1B, $1B, $1B, $00, $00, $00
.byte $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
.byte $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
.byte $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00


; D400 - bank 7
.byte $20, $F1, $D8, $20, $19, $D9, $A5, $1E, $29, $1F, $AA, $BD, $34, $D4, $F0, $23
.byte $AA, $CA, $8A, $0A, $0A, $AA, $A5, $16, $10, $0A, $24, $70, $70, $08, $A5, $15
.byte $29, $01, $F0, $02, $E8, $E8, $BD, $54, $D4, $85, $61, $BD, $55, $D4, $85, $62
.byte $6C, $61, $00, $60, $01, $01, $01, $01, $02, $03, $03, $03, $03, $04, $05, $06
.byte $07, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
.byte $00, $00, $00, $00, $70, $D4, $A8, $D4, $ED, $D4, $45, $D5, $75, $D5, $90, $D5
.byte $A7, $D5, $CA, $D5, $30, $D6, $33, $D6, $34, $D6, $37, $D6, $3B, $D6, $38, $D6
.byte $20, $97, $D8, $A5, $00, $29, $C0, $F0, $20, $C9, $C0, $D0, $04, $20, $03, $D8
.byte $60, $20, $62, $D9, $B0, $21, $20, $3C, $D6, $A5, $00, $29, $C0, $C9, $80, $D0
.byte $04, $20, $6B, $D8, $60, $20, $62, $D8, $60, $20, $D1, $D5, $A5, $01, $D0, $04
.byte $20, $C9, $D6, $60, $20, $08, $D7, $60, $20, $97, $D8, $A5, $00, $29, $C0, $F0
.byte $2D, $C9, $C0, $D0, $04, $20, $03, $D8, $60, $20, $62, $D9, $B0, $2E, $20, $3C
.byte $D6, $AD, $C5, $00, $29, $7F, $C9, $01, $F0, $0C, $C9, $02, $F0, $08, $A5, $00
.byte $29, $C0, $C9, $40, $D0, $04, $20, $EC, $D6, $60, $20, $03, $D7, $60, $20, $D1
.byte $D5, $A5, $01, $D0, $04, $20, $C9, $D6, $60, $20, $08, $D7, $60, $A5, $00, $29
.byte $C0, $F0, $19, $C9, $C0, $D0, $04, $20, $03, $D8, $60, $48, $20, $3C, $D6, $68


; D500 - bank 7
.byte $C9, $80, $D0, $04, $20, $6B, $D8, $60, $20, $62, $D8, $60, $20, $10, $D5, $60
.byte $A5, $01, $F0, $20, $29, $03, $F0, $1C, $A5, $17, $29, $18, $4A, $4A, $4A, $A8
.byte $20, $27, $D6, $A5, $37, $4A, $4A, $4A, $4A, $AA, $BD, $35, $D5, $C5, $01, $D0
.byte $03, $20, $C9, $D6, $60, $00, $00, $00, $00, $02, $00, $00, $00, $00, $00, $00
.byte $00, $01, $00, $00, $00, $A5, $00, $29, $C0, $F0, $26, $C9, $C0, $D0, $04, $20
.byte $03, $D8, $60, $48, $20, $3C, $D6, $68, $C9, $80, $D0, $11, $AD, $C5, $00, $29
.byte $7F, $C9, $01, $F0, $08, $C9, $02, $F0, $04, $20, $03, $D7, $60, $20, $EC, $D6
.byte $60, $20, $10, $D5, $60, $20, $62, $D9, $B0, $12, $A5, $00, $29, $C0, $F0, $0C
.byte $C9, $40, $D0, $04, $20, $62, $D8, $60, $20, $6B, $D8, $60, $20, $83, $D8, $60
.byte $20, $62, $D9, $B0, $0E, $A5, $00, $29, $C0, $F0, $08, $C9, $40, $D0, $04, $20
.byte $EC, $D6, $60, $20, $83, $D8, $60, $A5, $00, $29, $C0, $F0, $19, $20, $6E, $D6
.byte $A5, $16, $29, $08, $D0, $10, $A5, $00, $29, $C0, $C9, $80, $D0, $04, $20, $6B
.byte $D8, $60, $20, $62, $D8, $60, $20, $83, $D8, $60, $20, $6E, $D6, $20, $83, $D8
.byte $60, $A5, $17, $29, $18, $4A, $4A, $AA, $4A, $A8, $B9, $04, $03, $29, $03, $85
.byte $03, $F0, $2C, $20, $27, $D6, $BD, $72, $01, $30, $08, $A5, $03, $09, $80, $9D
.byte $72, $01, $60, $BD, $72, $01, $29, $7F, $C5, $03, $D0, $22, $A9, $00, $9D, $72


; D600 - bank 7
.byte $01, $9D, $73, $01, $A5, $17, $29, $40, $D0, $1C, $68, $68, $4C, $DB, $D6, $BD
.byte $72, $01, $10, $12, $FE, $73, $01, $BD, $73, $01, $C9, $03, $90, $08, $A9, $00
.byte $9D, $72, $01, $9D, $73, $01, $60, $B9, $04, $03, $29, $F0, $99, $04, $03, $60
.byte $20, $A0, $D6, $60, $20, $45, $D6, $60, $20, $A0, $D6, $60, $20, $59, $D9, $A9
.byte $05, $9D, $6A, $01, $60, $20, $59, $D9, $A5, $00, $29, $80, $D0, $09, $BD, $6A
.byte $01, $F0, $03, $DE, $6A, $01, $60, $BD, $6A, $01, $F0, $11, $A5, $16, $29, $01
.byte $D0, $0B, $A5, $16, $29, $F7, $85, $16, $20, $03, $D8, $68, $68, $60, $20, $59
.byte $D9, $A5, $00, $29, $C0, $3D, $E7, $07, $D0, $09, $BD, $6A, $01, $F0, $1B, $DE
.byte $6A, $01, $60, $BD, $6A, $01, $F0, $12, $A5, $16, $29, $01, $D0, $0B, $A5, $16
.byte $29, $F7, $85, $16, $20, $03, $D8, $68, $68, $60, $A9, $00, $9D, $E7, $07, $60
.byte $20, $59, $D9, $A5, $00, $29, $40, $D0, $09, $BD, $6A, $01, $F0, $03, $DE, $6A
.byte $01, $60, $BD, $6A, $01, $F0, $11, $A5, $16, $29, $01, $D0, $0B, $A5, $16, $29
.byte $F7, $85, $16, $20, $03, $D8, $68, $68, $60, $A2, $00, $4C, $CE, $D6, $86, $02
.byte $A5, $1F, $29, $7F, $C5, $02, $F0, $02, $86, $1F, $60, $A2, $40, $A5, $03, $29
.byte $01, $D0, $02, $A2, $C0, $86, $20, $A2, $04, $4C, $CE, $D6, $20, $59, $D9, $A5
.byte $00, $29, $C0, $49, $C0, $9D, $E7, $07, $A5, $16, $29, $EF, $85, $16, $A2, $09


; D700 - bank 7
.byte $4C, $CE, $D6, $A2, $0C, $4C, $CE, $D6, $A5, $17, $29, $40, $F0, $19, $A4, $01
.byte $20, $64, $D7, $A6, $18, $E0, $04, $B0, $07, $B9, $D3, $D7, $F0, $43, $D0, $07
.byte $B9, $E3, $D7, $C9, $FF, $F0, $3A, $A2, $03, $20, $CE, $D6, $A4, $01, $A5, $17
.byte $29, $40, $D0, $06, $B9, $F3, $D7, $4C, $5E, $D7, $A6, $18, $E0, $04, $B0, $08
.byte $B9, $D3, $D7, $F0, $1C, $4C, $5E, $D7, $B9, $E3, $D7, $C9, $FF, $F0, $12, $A0
.byte $0B, $85, $4D, $8A, $29, $01, $F0, $02, $A0, $F5, $98, $18, $65, $4D, $85, $20
.byte $60, $4C, $C9, $D6, $24, $70, $70, $06, $A5, $18, $C9, $07, $90, $02, $A9, $06
.byte $0A, $AA, $BD, $85, $D7, $85, $61, $BD, $86, $D7, $85, $62, $B1, $61, $C9, $FF
.byte $F0, $02, $85, $2E, $60, $93, $D7, $93, $D7, $A3, $D7, $A3, $D7, $B3, $D7, $C3
.byte $D7, $F3, $D7, $80, $60, $A0, $FF, $80, $60, $A0, $FF, $80, $60, $A0, $FF, $FF
.byte $FF, $FF, $FF, $00, $20, $E0, $FF, $00, $20, $E0, $FF, $00, $20, $E0, $FF, $FF
.byte $FF, $FF, $FF, $40, $40, $40, $FF, $60, $60, $60, $FF, $20, $20, $20, $FF, $FF
.byte $FF, $FF, $FF, $C0, $C0, $C0, $FF, $A0, $E0, $E0, $FF, $E0, $A0, $A0, $FF, $FF
.byte $FF, $FF, $FF, $00, $40, $C0, $00, $00, $40, $C0, $00, $00, $40, $C0, $00, $00
.byte $00, $00, $00, $00, $FF, $FF, $00, $80, $80, $80, $00, $00, $00, $00, $00, $00
.byte $00, $00, $00, $00, $40, $C0, $00, $80, $60, $A0, $00, $00, $20, $E0, $00, $00


; D800 - bank 7
.byte $00, $00, $00, $A4, $01, $A5, $1E, $29, $0F, $AA, $C9, $04, $F0, $23, $A5, $21
.byte $29, $0F, $C9, $04, $D0, $08, $A5, $1E, $29, $0F, $C9, $00, $D0, $13, $A5, $17
.byte $29, $40, $D0, $17, $BD, $45, $D8, $AA, $20, $CE, $D6, $B9, $52, $D8, $4C, $38
.byte $D8, $A2, $08, $20, $CE, $D6, $A5, $37, $85, $20, $60, $A2, $05, $20, $CE, $D6
.byte $A9, $00, $4C, $38, $D8, $05, $06, $06, $06, $00, $00, $00, $00, $00, $05, $05
.byte $05, $05, $00, $40, $C0, $00, $80, $60, $A0, $00, $00, $20, $E0, $00, $00, $00
.byte $00, $00, $A9, $01, $85, $CD, $A2, $0B, $4C, $CE, $D6, $A5, $8E, $30, $0B, $20
.byte $4F, $8A, $A0, $00, $B1, $4D, $09, $10, $91, $4D, $A9, $00, $85, $CD, $A2, $0A
.byte $4C, $CE, $D6, $A5, $16, $29, $01, $F0, $0D, $A5, $4B, $C9, $18, $90, $07, $A4
.byte $01, $F0, $03, $20, $64, $D7, $60, $A5, $17, $29, $40, $F0, $21, $A5, $2E, $29
.byte $E0, $4A, $4A, $4A, $4A, $4A, $A8, $A5, $18, $0A, $AA, $BD, $C5, $D8, $85, $61
.byte $BD, $C6, $D8, $85, $62, $B1, $61, $D0, $05, $A0, $00, $20, $64, $D7, $60, $08
.byte $08, $04, $04, $01, $02, $D1, $D8, $D1, $D8, $D9, $D8, $D9, $D8, $E1, $D8, $E9
.byte $D8, $00, $00, $00, $01, $01, $01, $00, $00, $01, $01, $00, $00, $00, $00, $00
.byte $01, $00, $01, $01, $01, $00, $00, $00, $00, $00, $00, $00, $00, $00, $01, $01
.byte $01, $A2, $07, $B5, $F1, $29, $0F, $F0, $0C, $A8, $B9, $09, $D9, $D0, $06, $B5


; D900 - bank 7
.byte $F1, $29, $F0, $95, $F1, $CA, $10, $EB, $60, $01, $01, $01, $00, $01, $01, $01
.byte $00, $01, $01, $01, $00, $00, $00, $00, $00, $24, $70, $70, $15, $A5, $F7, $29
.byte $0F, $A4, $F5, $A6, $17, $30, $06, $A5, $F8, $29, $0F, $A4, $F6, $84, $00, $85
.byte $01, $60, $A5, $17, $29, $18, $4A, $4A, $4A, $AA, $B5, $F5, $A8, $B5, $F1, $29
.byte $0F, $4C, $2D, $D9, $24, $70, $50, $10, $AE, $6F, $00, $CA, $BD, $86, $00, $C5
.byte $90, $F0, $05, $CA, $10, $F6, $A2, $00, $60, $A5, $17, $29, $18, $4A, $4A, $4A
.byte $AA, $60, $A5, $16, $29, $01, $F0, $17, $A5, $3E, $10, $13, $A5, $3D, $49, $FF
.byte $18, $69, $01, $A5, $3E, $49, $FF, $69, $00, $C9, $06, $90, $02, $38, $60, $18
.byte $60, $24, $70, $70, $3E, $20, $E8, $D9, $20, $0C, $DA, $A2, $01, $BD, $0C, $03
.byte $A8, $5D, $0E, $03, $3D, $0C, $03, $9D, $0C, $03, $98, $9D, $0E, $03, $CA, $10
.byte $EC, $30, $7A, $20, $E8, $D9, $20, $0C, $DA, $AC, $0C, $03, $AD, $0D, $03, $48
.byte $20, $E8, $D9, $20, $0C, $DA, $68, $CD, $0D, $03, $D0, $ED, $CC, $0C, $03, $D0
.byte $E8, $F0, $C8, $20, $E8, $D9, $A5, $00, $8D, $0E, $03, $A5, $01, $8D, $0F, $03
.byte $A2, $03, $BD, $0C, $03, $A8, $5D, $08, $03, $3D, $0C, $03, $9D, $0C, $03, $98
.byte $9D, $08, $03, $CA, $10, $EC, $30, $35, $A6, $FB, $E8, $8E, $16, $40, $CA, $8E
.byte $16, $40, $A2, $08, $AD, $16, $40, $4A, $2E, $0C, $03, $4A, $26, $00, $AD, $17


; DA00 - bank 7
.byte $40, $4A, $2E, $0D, $03, $4A, $26, $01, $CA, $D0, $E9, $60, $A5, $00, $0D, $0C
.byte $03, $8D, $0C, $03, $A5, $01, $0D, $0D, $03, $8D, $0D, $03, $60, $A2, $03, $BD
.byte $04, $03, $1D, $0C, $03, $9D, $04, $03, $CA, $10, $F4, $60, $00, $00, $00, $00
.byte $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
.byte $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
.byte $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
.byte $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
.byte $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
.byte $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
.byte $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
.byte $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
.byte $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
.byte $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
.byte $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
.byte $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
.byte $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00


; DB00 - bank 7
.byte $A2, $00, $A9, $00, $9D, $00, $00, $E8, $E0, $F1, $90, $F8, $60, $A9, $00, $85
.byte $61, $A9, $03, $85, $62, $A2, $00, $A9, $00, $81, $61, $E6, $61, $D0, $02, $E6
.byte $62, $A5, $62, $C9, $07, $D0, $F0, $A5, $61, $C9, $FF, $D0, $EA, $60, $A9, $20
.byte $A0, $00, $A2, $00, $20, $F2, $FC, $A9, $24, $20, $F2, $FC, $A9, $28, $20, $F2
.byte $FC, $60, $A5, $FF, $29, $FC, $05, $EC, $85, $FF, $20, $DF, $FC, $60

; db4e - reset H/V scroll
;   LDA #$00
;   STA $2005
;   STA $2005
  JSL reset_HV_OFFS_to_0
;   LDA PPU_CONTROL_STATUS
;   AND #$FC
;   STA $2000
;   STA PPU_CONTROL_STATUS
  nops 9
  JSL set_vm_incr_to_1_and_reset_nametable_and_store

  RTS

.byte $A9, $00, $85, $FC, $A9, $00, $85, $EC, $A5, $C3, $EA, $EA, $EA, $85, $FD, $A5
.byte $C4, $EA, $EA, $29, $01, $05, $EC, $85, $EC, $60, $AD, $AE, $06, $CD, $AF, $06
.byte $F0, $06, $8D, $AF, $06, $20, $BC, $FE, $60, $8C, $6B, $00, $A0, $04, $EE, $9F
.byte $06, $EE, $A1, $06, $6E, $A0, $06, $6E, $A1, $06, $6E, $A2, $06, $B0, $09, $AD
.byte $A1, $06, $6D, $9F, $06, $8D, $A1, $06, $88, $D0, $E9, $AD, $A0, $06, $6D, $A2
.byte $06, $8D, $A2, $06, $6D, $A1, $06, $AC, $6B, $00, $60, $A9, $00, $85, $C2, $85
.byte $C3, $85, $C4, $20, $00, $E5, $20, $42, $DB, $60, $A9, $00, $85, $C2, $85, $C3
.byte $A9, $F8, $85, $C4, $20, $00, $E5, $20, $42, $DB, $60, $AE, $17, $06, $F0, $10
.byte $A9, $F0, $E0, $00, $F0, $0A, $9D, $00, $02, $E8, $E8, $E8, $E8, $4C, $E2, $DB
.byte $60, $A2, $04, $A9, $F0, $9D, $00, $02, $E0, $00, $F0, $07, $E8, $E8, $E8, $E8


; DC00 - bank 7
.byte $4C, $F5, $DB, $60, $A5, $61, $49, $FF, $18, $69, $01, $85, $61, $A5, $62, $49
.byte $FF, $69, $00, $85, $62, $60, $8A, $48, $98, $48, $A9, $00, $85, $66, $85, $65
.byte $A5, $63, $05, $64, $D0, $06, $85, $61, $85, $62, $F0, $3C, $A2, $10, $26, $61
.byte $26, $62, $CA, $F0, $33, $90, $F7, $A5, $61, $09, $01, $85, $61, $E8, $86, $4D
.byte $B0, $05, $38, $26, $61, $26, $62, $26, $65, $26, $66, $A6, $65, $A4, $66, $A5
.byte $65, $38, $E5, $63, $85, $65, $A5, $66, $E5, $64, $85, $66, $B0, $06, $86, $65
.byte $84, $66, $C6, $61, $C6, $4D, $D0, $DA, $68, $A8, $68, $AA, $60, $48, $8A, $48
.byte $A5, $4E, $48, $A9, $00, $85, $4E, $A2, $10, $26, $61, $26, $62, $26, $4E, $A5
.byte $4E, $C5, $4D, $90, $04, $E5, $4D, $85, $4E, $26, $61, $26, $62, $CA, $D0, $ED
.byte $68, $85, $4E, $68, $AA, $68, $60, $8A, $48, $98, $48, $A9, $00, $85, $65, $85
.byte $66, $A5, $62, $05, $61, $F0, $21, $46, $62, $66, $61, $90, $0F, $18, $A5, $65
.byte $65, $63, $85, $65, $A5, $66, $65, $64, $85, $66, $B0, $06, $06, $63, $26, $64
.byte $90, $DF, $68, $A8, $68, $AA, $38, $60, $68, $A8, $68, $AA, $18, $60, $85, $61
.byte $85, $63, $A9, $00, $85, $62, $85, $64, $20, $97, $DC, $60, $8D, $A3, $06, $8A
.byte $48, $98, $48, $A9, $5A, $8D, $06, $01, $AD, $06, $01, $D0, $FB, $CE, $A3, $06
.byte $D0, $F1, $68, $A8, $68, $AA, $60, $8D, $A3, $06, $A9, $5A, $8D, $06, $01, $AD


; DD00 - bank 7
.byte $06, $01, $D0, $FB, $CE, $A3, $06, $D0, $F1, $60, $48, $8A, $48, $98, $48, $A2
.byte $7E, $CA, $D0, $FD, $68, $A8, $68, $AA, $68, $60, $60, $85, $59, $8A, $48, $98
.byte $48, $A5, $59, $0A, $0A, $18, $65, $59, $65, $59, $A8, $B9, $B0, $DD, $85, $61
.byte $85, $63, $B9, $B1, $DD, $85, $62, $18, $69, $08, $85, $64, $B9, $B2, $DD, $85
.byte $5B, $C6, $5B, $4A, $08, $69, $00, $85, $5C, $B9, $B3, $DD, $85, $65, $B9, $B4
.byte $DD, $85, $66, $B9, $B5, $DD, $85, $5A, $A9, $00, $28, $90, $02, $A9, $FF, $85
.byte $59, $A4, $5C, $88, $B1, $65, $24, $59, $30, $09, $48, $4A, $4A, $4A, $4A, $20
.byte $83, $DD, $68, $20, $83, $DD, $A9, $00, $85, $59, $C6, $5C, $D0, $E3, $68, $A8
.byte $68, $AA, $60, $29, $0F, $F0, $04, $A0, $00, $84, $5B, $A4, $5B, $F0, $07, $C6
.byte $5B, $A9, $00, $4C, $9B, $DD, $18, $69, $10, $65, $5A, $A0, $00, $91, $61, $A9
.byte $00, $91, $63, $E6, $61, $D0, $02, $E6, $62, $E6, $63, $D0, $02, $E6, $64, $60
.byte $24, $20, $06, $70, $38, $20, $06, $70, $2E, $20, $06, $70, $54, $23, $01, $9A
.byte $06, $00, $85, $4D, $29, $3F, $0A, $AA, $BD, $24, $DE, $85, $61, $BD, $25, $DE
.byte $85, $62, $A0, $00, $B1, $61, $A9, $00, $85, $00, $C8, $B1, $61, $AA, $C8, $B1
.byte $61, $C9, $FF, $F0, $3B, $C9, $20, $B0, $09, $86, $63, $85, $64, $C6, $00, $4C
.byte $F8, $DD, $8D, $06, $20, $8E, $06, $20, $C8, $B1, $61, $85, $4E, $C8, $B1, $61


; DE00 - bank 7
.byte $24, $4D, $10, $02, $A9, $20, $24, $00, $10, $0D, $A2, $00, $81, $63, $E6, $63
.byte $D0, $08, $E6, $64, $4C, $1A, $DE, $8D, $07, $20, $C6, $4E, $D0, $DF, $F0, $B6
.byte $20, $DF, $FC, $60, $85, $4D, $29, $3F, $0A, $AA, $BD, $CA, $DE, $85, $61, $BD
.byte $CB, $DE, $85, $62, $A0, $00, $B1, $61, $A9, $00, $85, $00, $C8, $B1, $61, $AA
.byte $C8, $B1, $61, $C9, $FF, $F0, $3E, $C9, $20, $B0, $09, $86, $63, $85, $64, $C6
.byte $00, $4C, $5A, $DE

  STA VMADDH
  STX VMADDL

 
.byte $C8, $B1, $61, $85, $4E, $C8
.byte $B1, $61, $24, $4D, $10, $02, $A9, $20, $20, $89, $DE, $24, $00, $10, $0D, $A2
.byte $00, $81, $63, $E6, $63, $D0, $08, $E6, $64, $4C, $7F, $DE

 STA VMDATAL

.byte $C6
.byte $4E, $D0, $DC, $F0, $B3, $20, $DF, $FC, $60, $C9, $20, $90, $16, $C9, $30, $B0
.byte $08, $38, $E9, $20, $AA, $BD, $BB, $DE, $60, $C9, $3A, $B0, $07, $38, $E9, $30
.byte $18, $69, $EA, $60, $C9, $41, $B0, $08, $38, $E9, $3A, $AA, $BD, $CB, $DE, $60
.byte $C9, $5B, $B0, $06, $38, $E9, $41, $18, $69, $D0, $60, $00, $00, $00, $F5, $FA
.byte $00, $00, $00, $F8, $F9, $00, $00, $F7, $F4, $F6, $D6, $DE, $07, $DF, $14, $DF
.byte $25, $DF, $36, $DF, $47, $DF, $00, $0A, $01, $02, $31, $50, $3E, $01, $02, $31
.byte $50, $1E, $01, $02, $48, $49, $35, $01, $08, $54, $49, $4D, $45, $20, $31, $39
.byte $39, $14, $01, $09, $46, $52, $45, $45, $20, $50, $4C, $41, $59, $26, $01, $01


; DF00 - bank 7
.byte $30, $46, $01, $01, $30, $FF, $FF
.byte $00, $0A, $01, $02, $32, $50, $3E, $01, $02, $32, $50, $FF, $FF
.byte $00, $CC, $21, $0B, $47, $41, $4D, $45, $20, $4F, $56, $45, $52, $20, $20, $FF, $FF
.byte $00, $CC, $21, $0B, $47, $41, $4D, $45, $20, $45, $4E, $44, $20, $20, $20, $FF, $FF
.byte $00, $CC, $21, $0B, $54, $49, $4D, $45, $20, $4F, $56, $45, $52, $20, $20, $FF, $FF
.byte $00, $0A, $01, $0B, $43, $4F, $4E, $54, $49, $4E, $55, $45, $20, $20, $20, $FF, $FF

.byte $AD, $9C, $06, $CD, $9D, $06, $F0, $05
.byte $8D, $9D, $06, $D0, $0B, $AD, $EB, $06, $CD, $EC, $06, $F0, $06, $8D, $EC, $06
.byte $20, $A0, $DF, $60, $48, $8A, $48, $98, $48, $A5, $FF, $48, $20, $A0, $FC

; DF7F
  PLA
  JSL change_ppu_vblank_status
;   STA $2000
;   STA $FF
  NOP
  LDA $069B
  ASL
  TAX
  LDA $E087,X
  STA $02
  LDA $E088,X
  STA $03
  JSR $E024
  JSR $DFA0
  PLA
  TAY
  PLA
  TAX
  PLA
  RTS

.byte $A5, $70, $29, $02, $D0, $27, $AD, $9C, $06, $29, $0F, $0A, $AA, $BD, $23, $E2
.byte $85, $02, $BD, $24, $E2, $85, $03, $AD, $9C, $06, $29, $F0, $4A, $4A, $4A, $AA
.byte $BD, $77, $E2, $85, $04, $BD, $78, $E2, $85, $05, $4C, $F1, $DF, $AD, $9C, $06
.byte $29, $0F, $0A, $AA, $BD, $ED, $E1, $85, $02, $BD, $EE, $E1, $85, $03, $AD, $9C
.byte $06, $29, $F0, $4A, $4A, $4A, $AA, $BD, $ED, $E1, $85, $04, $BD, $EE, $E1, $85
.byte $05, $AD, $EB, $06, $29, $0F, $0A, $48, $AA, $BD, $A3, $E2, $85, $06, $BD, $A4


; E000 - bank 7
.byte $E2, $85, $07, $AD, $EB, $06, $29, $F0, $4A, $4A, $4A, $85, $08, $68, $0A, $18
.byte $65, $08, $AA, $BD, $DD, $E2, $85, $08, $BD, $DE, $E2, $85, $09, $20, $4B, $E0
.byte $20, $DF, $FC, $60

;E024 - Set Palette
;   LDA #$3F
;   STA VMADDH
;   LDA #$00
;   STA VMADDL
;   LDY #$00
; : LDA ($02),Y
;   STA VMDATAL
;   INY
;   CPY #$10
;   BCC :-
  JSL load_palette
  nops 18
@nes_e03a:
  LDA #$3F
  STA VMADDH
  LDA #$00
  STA VMADDL
  STA VMADDH
  STA VMADDL
  RTS

; E04b - sprite palettes 
  JSL load_sprite_palette
;   LDA #$3F
;   STA VMADDH
;   LDA #$10
;   STA VMADDL
;   LDY #$00
; : LDA ($02),Y
;   STA VMDATAL
;   INY
;   CPY #$04
;   BCC :-
;   LDY #$00
; : LDA ($04),Y
;   STA VMDATAL
;   INY
;   CPY #$04
;   BCC :-
;   LDY #$00
; : LDA ($06),Y
;   STA VMDATAL
;   INY
;   CPY #$04
;   BCC :-
;   LDY #$00
; : LDA ($08),Y
;   STA VMDATAL
;   INY
;   CPY #$04
;   BCC :-
  nops 54
  BCS @nes_e03a

.byte $BD, $E0, $CD, $E0, $DD, $E0, $ED, $E0, $FD
.byte $E0, $0D, $E1, $1D, $E1, $2D, $E1, $3D, $E1, $4D, $E1, $7D, $E1, $5D, $E1, $6D
.byte $E1, $DD, $E1, $8D, $E1, $9D, $E1, $9D, $E1, $A1, $E1, $A5, $E1, $A9, $E1, $AD
.byte $E1, $B1, $E1, $B5, $E1, $B9, $E1, $BD, $E1, $CD, $E1, $CD, $E1, $0F, $35, $25
.byte $21, $0F, $30, $21, $12, $0F, $30, $16, $25, $0F, $28, $18, $08, $0F, $30, $10
.byte $00, $0F, $30, $2C, $1C, $0F, $28, $18, $08, $0F, $1C, $18, $02, $0F, $30, $28
.byte $18, $0F, $30, $21, $12, $0F, $1A, $0A, $21, $0F, $28, $18, $08, $0F, $31, $21
.byte $11, $0F, $30, $21, $12, $0F, $24, $14, $04, $0F, $30, $31, $22, $0F, $36, $26


; E100 - bank 7
.byte $17, $0F, $30, $28, $16, $0F, $05, $04, $10, $0F, $36, $17, $1C, $0F, $26, $16
.byte $06, $0F, $27, $17, $08, $0F, $17, $1A, $0A, $0F, $26, $1A, $0A, $0F, $28, $16
.byte $06, $0F, $30, $33, $11, $0F, $33, $16, $06, $0F, $30, $10, $28, $0F, $31, $12
.byte $06, $0F, $3B, $2B, $1B, $0F, $1C, $0C, $28, $0F, $2C, $1C, $0C, $0F, $16, $28
.byte $18, $0F, $30, $2A, $1A, $0F, $21, $10, $00, $0F, $28, $30, $12, $0F, $27, $17
.byte $07, $0F, $38, $28, $18, $0F, $18, $21, $12, $0F, $2A, $1A, $0A, $0F, $27, $17
.byte $07, $0F, $36, $26, $16, $0F, $16, $26, $16, $0F, $2A, $1A, $0A, $0F, $17, $07
.byte $0F, $0F, $28, $18, $08, $0F, $08, $02, $0F, $0F, $1A, $0A, $0F, $0F, $27, $28
.byte $14, $0F, $28, $38, $14, $0F, $30, $21, $26, $0F, $30, $26, $17, $0F, $0F, $0F
.byte $0F, $0F, $0F, $0F, $0F, $0F, $0F, $0F, $0F, $0F, $0F, $0F, $0F, $0C, $0F, $0F
.byte $0F, $0C, $0F, $0F, $0F, $0C, $0F, $0F, $0F, $0C, $30, $26, $0F, $0C, $30, $27
.byte $07, $0C, $30, $36, $1C, $0C, $30, $17, $0F, $0C, $30, $36, $08, $0C, $30, $27
.byte $0F, $0C, $30, $16, $0F, $0C, $30, $36, $07, $0C, $30, $37, $07, $0C, $30, $00
.byte $17, $0C, $30, $1C, $16, $0C, $30, $1B, $0B, $0C, $30, $1C, $16, $0C, $30, $00
.byte $17, $0C, $30, $1B, $0B, $0C, $30, $38, $0F, $0C, $30, $0F, $17, $FF, $E1, $03
.byte $E2, $07, $E2, $0B, $E2, $0F, $E2, $13, $E2, $17, $E2, $1B, $E2, $1F, $E2, $0C


; E200 - bank 7
.byte $07, $2A, $37, $0C, $07, $30, $27, $0C, $1C, $25, $36, $0C, $0F, $24, $17, $0C
.byte $08, $26, $36, $0C, $0F, $16, $27, $0C, $07, $2C, $36, $0C, $0F, $28, $16, $0C
.byte $0F, $30, $26, $47, $E2, $4B, $E2, $4F, $E2, $53, $E2, $57, $E2, $5B, $E2, $5F
.byte $E2, $63, $E2, $67, $E2, $6B, $E2, $47, $E2, $6F, $E2, $DD, $E1, $DD, $E1, $43
.byte $E2, $73, $E2, $0F, $0F, $08, $0F, $0F, $07, $2A, $37, $0F, $07, $30, $27, $0F
.byte $0C, $25, $36, $0F, $0F, $24, $17, $0F, $08, $26, $36, $0F, $0F, $16, $27, $0F
.byte $07, $2C, $36, $0F, $0F, $28, $16, $0F, $0F, $30, $26, $0F, $36, $26, $16, $0C
.byte $30, $26, $00, $0F, $0F, $30, $10, $47, $E2, $4B, $E2, $4F, $E2, $53, $E2, $57
.byte $E2, $5B, $E2, $5F, $E2, $63, $E2, $67, $E2, $97, $E2, $47, $E2, $9B, $E2, $9F
.byte $E2, $9F, $E2, $97, $E2, $73, $E2, $0F, $30, $36, $26, $0C, $30, $10, $00, $0C
.byte $30, $1B, $0B, $C1, $E2, $C1, $E2, $C1, $E2, $C1, $E2, $C5, $E2, $C1, $E2, $C9
.byte $E2, $CD, $E2, $D1, $E2, $D5, $E2, $D9, $E2, $D9, $E2, $E5, $E1, $E5, $E1, $C1
.byte $E2, $0F, $0F, $30, $27, $0F, $0F, $30, $27, $0F, $0F, $30, $27, $0F, $0F, $30
.byte $27, $0F, $0F, $30, $27, $0F, $30, $10, $22, $0C, $30, $21, $12, $19, $E3, $21
.byte $E3, $1D, $E3, $25, $E3, $19, $E3, $21, $E3, $19, $E3, $21, $E3, $19, $E3, $21
.byte $E3, $19, $E3, $21, $E3, $19, $E3, $21, $E3, $19, $E3, $21, $E3, $19, $E3, $21


; E300 - bank 7
.byte $E3, $29, $E3, $29, $E3, $29, $E3, $29, $E3, $29, $E3, $29, $E3, $E9, $E1, $E9
.byte $E1, $E9, $E1, $E9, $E1, $19, $E3, $19, $E3, $0F, $0F, $30, $10, $0F, $07, $37
.byte $26, $0F, $26, $26, $30, $0F, $30, $26, $30, $0C, $26, $16, $06, $24, $15, $10
.byte $70, $24, $70, $50, $09, $C9, $0C, $F0, $05, $48, $20, $BC, $E3, $68, $0A, $A8
.byte $B9, $A2, $E3, $85, $65, $B9, $A3, $E3, $85, $66, $A5, $43, $29, $70, $C9, $20
.byte $F0, $26, $98, $4A, $AE, $7B, $06, $9D, $7C, $06, $A5, $48, $9D, $7D, $06, $A5
.byte $49, $10, $05, $A9, $00, $9D, $7D, $06, $F0, $05, $A9, $FF, $9D, $7D, $06, $EE
.byte $7A, $06, $EE, $7B, $06, $EE, $7B, $06, $A0, $00, $A5, $43, $91, $65, $C8, $A5
.byte $41, $91, $65, $C8, $A5, $42, $91, $65, $C8, $A5, $45, $91, $65, $C8, $A5, $46
.byte $91, $65, $C8, $A5, $48, $18, $65, $4B, $91, $65, $C8, $A5, $49, $65, $4C, $91
.byte $65, $60, $18, $06, $1F, $06, $26, $06, $2D, $06, $34, $06, $3B, $06, $42, $06
.byte $49, $06, $50, $06, $57, $06, $5E, $06, $65, $06, $6C, $06, $24, $17, $10, $36
.byte $A5, $15, $29, $02, $D0, $19, $A5, $45, $38, $E5, $C3, $85, $00, $A5, $46, $E5
.byte $C4, $30, $10, $D0, $12, $A5, $00, $C9, $08, $90, $08, $C9, $FC, $B0, $08, $A9
.byte $00, $F0, $06, $A9, $80, $30, $02, $A9, $C0, $48, $A5, $17, $4A, $4A, $4A, $29
.byte $03, $AA, $68, $9D, $EB, $07, $60, $A0, $1F, $B1, $4D, $29, $BF, $91, $4D, $24


; E400 - bank 7
.byte $70, $70, $6A, $24, $78, $70, $66, $A0, $05, $B1, $4D, $10, $60, $29, $7F, $F0
.byte $5C, $A0, $00, $B1, $4D, $29, $06, $D0, $54, $A0, $06, $B1, $4D, $29, $7F, $C9
.byte $0B, $F0, $4A, $C9, $0C, $F0, $46, $C9, $08, $F0, $42, $C9, $1F, $F0, $3E, $A5
.byte $C3, $18, $69, $80, $85, $61, $A5, $C4, $69, $00, $85, $62, $A0, $30, $B1, $4D
.byte $38, $E5, $61, $85, $61, $C8, $B1, $4D, $E5, $62, $10, $0F, $48, $A5, $61, $49
.byte $FF, $18, $69, $01, $85, $61, $68, $49, $FF, $69, $00, $D0, $06, $A5, $61, $C9
.byte $A0, $90, $0A, $38, $A0, $1F, $B1, $4D, $09, $40, $91, $4D, $60, $18, $60, $A5
.byte $3D, $49, $FF, $18, $69, $01, $85, $0E, $08, $A5, $3E, $49, $FF, $85, $0F, $28
.byte $A5, $0F, $69, $00, $85, $0F, $60, $A9, $2A, $8D, $00, $02, $A9, $FF, $8D, $01
.byte $02, $A9, $23, $8D, $02, $02, $A9, $FA, $8D, $03, $02, $60

; E49C
  LDA #$20
  STA VMADDH ; PpuAddr_2006
  LDX $0107
  TXA
  SEC
  SBC #$5F
  BCC :+
  LDX #$00
: TXA
  CLC
  ADC #$40
  STA VMADDL
  STX $0107

  JSL set_vm_incr_to_1_and_store
;   LDA $FF
;   AND #$FB
;   STA $FF
;   STA PpuControl_2000
  nops 5
  
  LDA #$60
  SEC
  SBC $0107
  TAY
  SEC
  SBC #$20
  BCC :+
  LDA #$20
  TAY
: LDA $0108,X
  STA VMDATAL ; PpuData_2007
  INX
  DEY
  BNE :-
  STX $0107
  BIT $70
  BVC :+
  LDA #$20
  STA VMADDH ; PpuAddr_2006
  LDA #$A2
  STA VMADDL ; PpuAddr_2006
  LDA $0168
  STA VMDATAL ; PpuData_2007
  LDA #$20
  STA VMADDH ; PpuAddr_2006
  LDA #$BD
  STA VMADDL ; PpuAddr_2006
  LDA $0169
  STA VMDATAL ; PpuData_2007
: RTS

; E500 - bank 7
.byte $A5, $78, $29, $01, $D0, $67, $A5, $78, $29, $04, $F0, $07, $AD, $13, $03, $C9
.byte $02, $B0, $1D, $A5, $C5, $29, $7F, $D0, $06, $A5, $8A, $10, $33, $30, $08, $C9
.byte $03, $D0, $2D, $A5, $CC, $10, $29, $A9, $80, $85, $C3, $A9, $00, $85, $C4, $60
.byte $24, $70, $50, $06, $A9, $00, $85, $C5, $F0, $16, $A5, $78, $29, $02, $A8, $A5
.byte $6F, $C9, $02, $90, $00, $B9, $D0, $E6, $85, $C3, $B9, $D1, $E6, $85, $C4, $60
.byte $A5, $E2, $30, $11, $D0, $18, $A5, $E1, $C9, $2C, $B0, $2A, $38, $E9, $10, $90
.byte $04, $C9, $20, $B0, $02, $A9, $20, $85, $C3, $A9, $00, $85, $C4, $60, $A5, $E1
.byte $C9, $D4, $90, $12, $18, $69, $10, $B0, $04, $C9, $E0, $90, $02, $A9, $E0, $85
.byte $C3, $A9, $00, $85, $C4, $60, $A5, $C5, $29, $7F, $C9, $06, $F0, $F7, $A4, $8A
.byte $C0, $06, $B0, $6E, $A2, $00, $A5, $C5, $29, $7F, $D0, $13, $24, $70, $70, $23
.byte $C0, $03, $90, $20, $20, $88, $C9, $A0, $2D, $B1, $4D, $30, $17, $10, $14, $A5
.byte $E2, $F0, $11, $A5, $C5, $29, $7F, $C9, $01, $F0, $08, $C9, $02, $F0, $04, $A5
.byte $D3, $30, $01, $E8, $A5, $E1, $18, $7D, $CA, $E6, $85, $61, $A5, $E2, $69, $00
.byte $85, $62, $C6, $62, $30, $12, $D0, $72, $A5, $61, $C9, $28, $90, $0A, $E0, $01
.byte $F0, $62, $A5, $61, $C9, $28, $B0, $08, $A9, $28, $85, $61, $A9, $00, $85, $62
.byte $E0, $00, $D0, $70, $A5, $C3, $38, $E5, $61, $A5, $C4, $E5, $62, $B0, $65, $4C


; E600 - bank 7
.byte $AB, $E6, $A2, $00, $A5, $C5, $29, $7F, $D0, $0F, $C0, $09, $90, $20, $20, $88
.byte $C9, $A0, $2D, $B1, $4D, $10, $17, $30, $14, $A5, $E2, $D0, $11, $A5, $C5, $29
.byte $7F, $C9, $01, $F0, $08, $C9, $02, $F0, $04, $A5, $D3, $10, $01, $E8, $A5, $E1
.byte $38, $FD, $CA, $E6, $85, $61, $A5, $E2, $E9, $00, $85, $62, $30, $AA, $D0, $0A
.byte $E0, $01, $F0, $9E, $A5, $61, $C9, $E4, $90, $08, $A9, $D8, $85, $61, $A9, $00
.byte $85, $62, $E0, $00, $D0, $0E, $A5, $C3, $38, $E5, $61, $A5, $C4, $E5, $62, $90
.byte $03, $4C, $AB, $E6, $A2, $00, $A5, $C3, $38, $E5, $61, $85, $4D, $A5, $C4, $E5
.byte $62, $B0, $10, $48, $E8, $A5, $4D, $49, $FF, $18, $69, $01, $85, $4D, $68, $49
.byte $FF, $69, $00, $D0, $06, $A5, $4D, $C9, $06, $90, $20, $8A, $0A, $AA, $BD, $CC
.byte $E6, $18, $65, $C2, $85, $C2, $BD, $CD, $E6, $48, $65, $C3, $85, $C3, $A2, $00
.byte $68, $10, $02, $A2, $FF, $8A, $65, $C4, $85, $C4, $60, $A9, $00, $85, $C2, $A9
.byte $28, $C5, $61, $90, $04, $85, $61, $B0, $08, $A9, $E0, $C5, $61, $B0, $02, $85
.byte $61, $A5, $61, $85, $C3, $A5, $62, $85, $C4, $60, $18, $80, $80, $F9, $80, $06
.byte $D8, $00, $28, $00, $80, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
.byte $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
.byte $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00


; E700 - bank 7
.byte $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
.byte $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
.byte $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
.byte $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
.byte $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
.byte $A5, $CD, $F0, $0A, $A5, $8D, $C9, $FF, $D0, $04, $A9, $01, $85, $CD, $A5, $CD
.byte $0A, $AA, $BD, $6F, $E7, $85, $61, $BD, $70, $E7, $85, $62, $6C, $61, $00, $A7
.byte $E7, $E0, $E9, $E0, $E9, $E0, $E9, $5B, $EC, $E0, $E9, $E0, $E9, $E0, $E9, $E0
.byte $E9, $E0, $E9, $E0, $E9, $E0, $E9, $E0, $E9, $E0, $E9, $E0, $E9, $E0, $E9, $E0
.byte $E9, $E0, $E9, $E0, $E9, $E0, $E9, $E0, $E9, $E0, $E9, $A0, $08, $B9, $44, $00
.byte $99, $E0, $00, $88, $10, $F7, $60, $A9, $03, $85, $C5, $A5, $16, $29, $7F, $85
.byte $16, $20, $9B, $E7, $20, $6A, $ED, $A5, $34, $29, $FE, $85, $34, $A5, $4B, $C9
.byte $08, $90, $06, $A5, $34, $09, $01, $85, $34, $A9, $10, $18, $65, $E7, $85, $E7
.byte $A5, $E8, $69, $00, $85, $E8, $A4, $8E, $20, $0D, $E9, $20, $2B, $CA, $85, $4D
.byte $20, $CC, $E8, $20, $00, $CD, $A5, $61, $85, $D5, $A5, $62, $85, $D6, $A5, $63
.byte $85, $D7, $A5, $64, $85, $D8, $A9, $00, $85, $08, $85, $09, $85, $0A, $A5, $0C


; E800 - bank 7
.byte $38, $E5, $E1, $85, $00, $A5, $0D, $E5, $E2, $85, $01, $A5, $01, $10, $1B, $A5
.byte $00, $49, $FF, $18, $69, $01, $85, $00, $08, $A5, $01, $49, $FF, $85, $01, $28
.byte $A5, $01, $69, $00, $85, $01, $A9, $01, $85, $09, $A5, $0E, $38, $E5, $E4, $85
.byte $02, $A5, $0F, $E5, $E5, $85, $03, $A5, $03, $10, $1B, $A5, $02, $49, $FF, $18
.byte $69, $01, $85, $02, $08, $A5, $03, $49, $FF, $85, $03, $28, $A5, $03, $69, $00
.byte $85, $03, $A9, $01, $85, $0A, $A5, $00, $38, $E5, $02, $A5, $01, $E5, $03, $B0
.byte $0C, $A5, $02, $85, $00, $A5, $03, $85, $01, $A9, $01, $85, $08, $4E, $01, $00
.byte $6E, $00, $00, $AD, $00, $00, $85, $62, $A9, $00, $85, $61, $A4, $D6, $A6, $D5
.byte $A5, $08, $F0, $04, $A6, $D7, $A4, $D8, $98, $85, $64, $8A, $85, $63, $A5, $64
.byte $10, $17, $A5, $63, $49, $FF, $18, $69, $01, $85, $63, $08, $A5, $64, $49, $FF
.byte $85, $64, $28, $A5, $64, $69, $00, $85, $64, $46, $64, $66, $63, $20, $16, $DC
.byte $46, $62, $66, $61, $A5, $DB, $85, $63, $A5, $DC, $85, $64, $20, $97, $DC, $A5
.byte $65, $85, $D9, $A5, $66, $85, $DA, $A9, $00, $85, $CE, $60, $24, $70, $70, $2E
.byte $A5, $8E, $C9, $02, $90, $08, $C9, $06, $F0, $04, $C9, $07, $D0, $20, $AD, $90
.byte $00, $C9, $02, $90, $08, $C9, $06, $F0, $04, $C9, $07, $D0, $11, $A9, $24, $85
.byte $4E, $85, $D4, $A9, $80, $85, $DB, $A9, $01, $85, $DC, $4C, $0C, $E9, $A9, $40


; E900 - bank 7
.byte $85, $4E, $85, $D4, $A9, $20, $85, $DB, $A9, $01, $85, $DC, $60, $24, $70, $50
.byte $4F, $A5, $8E, $C9, $FF, $D0, $49, $A5, $2E, $18, $69, $10, $29, $E0, $4A, $4A
.byte $4A, $4A, $A8, $B9, $D0, $E9, $08, $18, $65, $45, $85, $C7, $85, $61, $85, $0C
.byte $A5, $46, $69, $00, $28, $10, $03, $18, $69, $FF, $85, $C8, $85, $62, $85, $0D
.byte $B9, $D1, $E9, $08, $18, $65, $48, $85, $C9, $85, $63, $85, $0E, $A5, $49, $69
.byte $00, $28, $10, $03, $18, $69, $FF, $85, $CA, $85, $64, $85, $0F, $4C, $BA, $E9
.byte $84, $CC, $20, $88, $C9, $A5, $CD, $D0, $08, $A0, $00, $B1, $4D, $09, $10, $91
.byte $4D, $A0, $30, $B1, $4D, $85, $C7, $85, $61, $85, $0C, $C8, $B1, $4D, $85, $0D
.byte $85, $62, $85, $C8, $A0, $33, $B1, $4D, $85, $C9, $85, $63, $85, $0E, $C8, $B1
.byte $4D, $85, $0F, $85, $64, $85, $CA, $24, $70, $70, $1F, $A5, $CD, $D0, $1B, $A5
.byte $8E, $F0, $04, $C9, $06, $D0, $13, $AD, $90, $00, $C9, $01, $F0, $04, $C9, $07
.byte $D0, $08, $A5, $0E, $85, $63, $85, $0E, $85, $C9, $20, $89, $CB, $85, $CB, $A5
.byte $E1, $85, $65, $A5, $E2, $85, $66, $A5, $E4, $85, $67, $A5, $E5, $85, $68, $60
.byte $00, $40, $40, $40, $7F, $00, $40, $C0, $00, $C0, $C0, $C0, $81, $00, $C0, $40
.byte $A5, $16, $29, $7F, $85, $16, $20, $C0, $ED, $20, $9B, $E7, $20, $6A, $ED, $A9
.byte $10, $18, $65, $E7, $85, $E7, $A5, $E8, $69, $00, $85, $E8, $A4, $CE, $B9, $FB


; EA00 - bank 7
.byte $EB, $A8, $B9, $3C, $EC, $85, $D4, $A5, $CD, $C9, $10, $F0, $0E, $C9, $11, $F0
.byte $0A, $C9, $02, $90, $06, $A8, $B9, $45, $EC, $85, $D4, $20, $80, $C7, $85, $00
.byte $85, $CC, $A4, $8D, $C0, $FF, $F0, $06, $A5, $16, $29, $01, $D0, $36, $20, $88
.byte $C9, $A0, $09, $B1, $4D, $29, $7F, $C9, $13, $F0, $29, $A9, $00, $85, $D9, $85
.byte $DA, $A5, $16, $29, $01, $F0, $1A, $A9, $00, $85, $D9, $A9, $FC, $85, $DA, $A5
.byte $CD, $C9, $10, $F0, $04, $C9, $11, $D0, $08, $A9, $80, $85, $D9, $A9, $FD, $85
.byte $DA, $4C, $7A, $EB, $A4, $8D, $20, $88, $C9, $A9, $00, $85, $08, $A0, $30, $B1
.byte $4D, $85, $0C, $C8, $B1, $4D, $85, $0D, $A0, $33, $B1, $4D, $85, $0E, $C8, $B1
.byte $4D, $85, $0F, $A5, $0C, $38, $E5, $E1, $85, $00, $A5, $0D, $E5, $E2, $85, $01
.byte $A5, $01, $10, $17, $A5, $00, $49, $FF, $18, $69, $01, $85, $00, $08, $A5, $01
.byte $49, $FF, $85, $01, $28, $A5, $01, $69, $00, $85, $01, $A5, $0E, $38, $E5, $E4
.byte $85, $02, $A5, $0F, $E5, $E5, $85, $03, $A5, $03, $10, $17, $A5, $02, $49, $FF
.byte $18, $69, $01, $85, $02, $08, $A5, $03, $49, $FF, $85, $03, $28, $A5, $03, $69
.byte $00, $85, $03, $A5, $00, $38, $E5, $02, $A5, $01, $E5, $03, $B0, $0C, $A5, $0E
.byte $85, $0C, $A5, $0F, $85, $0D, $A9, $01, $85, $08, $A5, $0C, $85, $61, $A5, $0D
.byte $85, $62, $A0, $36, $B1, $4D, $85, $63, $C8, $B1, $4D, $85, $64, $A5, $E1, $85


; EB00 - bank 7
.byte $65, $A5, $E2, $85, $66, $A5, $08, $F0, $08, $A5, $E4, $85, $65, $A5, $E5, $85
.byte $66, $A5, $E7, $85, $67, $A5, $E8, $85, $68, $20, $2B, $CA, $85, $D3, $85, $4D
.byte $A5, $D4, $85, $4E, $20, $00, $CD, $A5, $64, $30, $17, $A5, $63, $49, $FF, $18
.byte $69, $01, $85, $63, $08, $A5, $64, $49, $FF, $85, $64, $28, $A5, $64, $69, $00
.byte $85, $64, $A5, $63, $85, $D9, $A5, $64, $85, $DA, $A4, $8D, $20, $88, $C9, $A0
.byte $30, $B1, $4D, $85, $61, $C8, $B1, $4D, $85, $62, $A0, $33, $B1, $4D, $85, $63
.byte $C8, $B1, $4D, $85, $64, $A5, $E1, $85, $65, $A5, $E2, $85, $66, $A5, $E4, $85
.byte $67, $A5, $E5, $85, $68, $20, $2B, $CA, $85, $D3, $A5, $CD, $C9, $07, $D0, $06
.byte $20, $97, $EB, $4C, $96, $EB, $C9, $0D, $F0, $08, $C9, $13, $F0, $04, $C9, $15
.byte $D0, $04, $A5, $2E, $85, $D3, $60, $A2, $00, $A4, $8D, $20, $88, $C9, $A0, $33
.byte $B1, $4D, $C9, $40, $B0, $02, $A2, $01, $A0, $10, $E0, $00, $D0, $02, $A0, $F0
.byte $98, $48, $A0, $34, $B1, $4D, $85, $64, $88, $68, $AA, $18, $71, $4D, $85, $63
.byte $20, $89, $DB, $29, $0F, $85, $4F, $8A, $10, $09, $A5, $4F, $49, $FF, $18, $69
.byte $01, $85, $4F, $A5, $63, $18, $65, $4F, $85, $63, $A0, $30, $B1, $4D, $85, $61
.byte $C8, $B1, $4D, $85, $62, $A5, $45, $85, $65, $A5, $46, $85, $66, $A5, $48, $85
.byte $67, $A5, $49, $85, $68, $20, $2B, $CA, $85, $D3, $60, $00, $01, $01, $02, $02


; EC00 - bank 7
.byte $03, $03, $03, $04, $04, $04, $04, $05, $05, $05, $05, $05, $06, $06, $06, $06
.byte $06, $06, $06, $06, $06, $06, $07, $07, $07, $07, $07, $07, $07, $07, $07, $07
.byte $07, $07, $07, $07, $07, $07, $07, $07, $07, $07, $08, $08, $08, $08, $08, $08
.byte $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $08, $00, $3A, $46, $54
.byte $64, $76, $8A, $A0, $A0, $00, $00, $50, $54, $50, $28, $50, $30, $40, $38, $60
.byte $68, $50, $70, $58, $88, $00, $00, $58, $48, $10, $40, $A5, $16, $29, $7F, $85
.byte $16, $20, $9B, $E7, $20, $6A, $ED, $A9, $14, $18, $65, $E7, $85, $E7, $A5, $E8
.byte $69, $00, $85, $E8, $A4, $8D, $20, $0D, $E9, $20, $2B, $CA, $85, $D3, $85, $4D
.byte $A9, $30, $85, $4E, $85, $D4, $20, $00, $CD, $A5, $61, $85, $D5, $A5, $62, $85
.byte $D6, $A5, $63, $85, $D7, $A5, $64, $85, $D8, $A9, $80, $85, $DB, $A9, $01, $85
.byte $DC, $A9, $00, $85, $08, $85, $09, $85, $0A, $A5, $0C, $38, $E5, $E1, $85, $00
.byte $A5, $0D, $E5, $E2, $85, $01, $A5, $01, $10, $1B, $A5, $00, $49, $FF, $18, $69
.byte $01, $85, $00, $08, $A5, $01, $49, $FF, $85, $01, $28, $A5, $01, $69, $00, $85
.byte $01, $A9, $01, $85, $09, $A5, $0E, $38, $E5, $E4, $85, $02, $A5, $0F, $E5, $E5
.byte $85, $03, $A5, $03, $10, $1B, $A5, $02, $49, $FF, $18, $69, $01, $85, $02, $08
.byte $A5, $03, $49, $FF, $85, $03, $28, $A5, $03, $69, $00, $85, $03, $A9, $01, $85


; ED00 - bank 7
.byte $0A, $A5, $00, $38, $E5, $02, $A5, $01, $E5, $03, $B0, $0C, $A5, $02, $85, $00
.byte $A5, $03, $85, $01, $A9, $01, $85, $08, $A5, $00, $85, $61, $A5, $01, $85, $62
.byte $A4, $D6, $A5, $08, $F0, $02, $A4, $D8, $98, $85, $63, $A9, $00, $85, $64, $A5
.byte $08, $D0, $10, $A5, $09, $F0, $19, $A5, $63, $49, $FF, $18, $69, $01, $85, $63
.byte $4C, $50, $ED, $A5, $0A, $F0, $09, $A5, $63, $49, $FF, $18, $69, $01, $85, $63
.byte $20, $16, $DC, $A5, $DB, $85, $63, $A5, $DC, $85, $64, $20, $97, $DC, $A5, $65
.byte $85, $D9, $A5, $66, $85, $DA, $20, $C0, $ED, $60, $A5, $2E, $18, $69, $10, $4A
.byte $4A, $4A, $4A, $4A, $AA, $A0, $00, $A5, $2E, $F0, $05, $C9, $80, $D0, $23, $C8
.byte $C0, $01, $F0, $11, $C8, $A5, $42, $10, $02, $A0, $07, $84, $00, $8A, $18, $65
.byte $00, $AA, $4C, $A2, $ED, $A5, $42, $30, $02, $A0, $FF, $84, $00, $8A, $18, $65
.byte $00, $AA, $BD, $B8, $ED, $08, $18, $65, $E1, $85, $E1, $A5, $E2, $69, $00, $28
.byte $10, $03, $18, $69, $FF, $85, $E2, $60, $00, $08, $08, $F8, $00, $08, $F8, $F8
.byte $A5, $CD, $C9, $10, $F0, $11, $C9, $11, $F0, $0D, $C9, $03, $90, $09, $A8, $B9
.byte $1A, $EF, $85, $CE, $4C, $2D, $EE, $A4, $7A, $A5, $17, $10, $02, $A4, $7B, $AD
.byte $76, $00, $10, $02, $A0, $08, $98, $29, $0F, $0A, $A8, $B9, $2E, $EE, $85, $4D
.byte $B9, $2F, $EE, $85, $4E, $A5, $17, $29, $07, $0A, $0A, $18, $65, $4D, $85, $4D


; EE00 - bank 7
.byte $A5, $4E, $69, $00, $85, $4E, $A5, $21, $29, $7F, $AA, $BD, $30, $EF, $A8, $B1
.byte $4D, $85, $CE, $A5, $CD, $C9, $10, $D0, $06, $0E, $CE, $00, $4C, $29, $EE, $C9
.byte $11, $D0, $06, $0E, $CE, $00, $0E, $CE, $00, $24, $17, $50, $00, $60, $42, $EE
.byte $5A, $EE, $72, $EE, $8A, $EE, $A2, $EE, $BA, $EE, $D2, $EE, $EA, $EE, $02, $EF
.byte $42, $EE, $0C, $09, $06, $03, $08, $06, $04, $02, $07, $05, $04, $02, $07, $05
.byte $04, $02, $09, $07, $05, $02, $08, $06, $04, $02, $0C, $09, $06, $03, $07, $05
.byte $04, $02, $06, $05, $03, $02, $05, $04, $03, $01, $08, $06, $04, $02, $07, $05
.byte $04, $02, $0B, $08, $06, $03, $07, $05, $04, $02, $06, $05, $03, $02, $06, $05
.byte $03, $02, $08, $06, $04, $02, $07, $05, $04, $02, $09, $07, $05, $02, $06, $05
.byte $03, $02, $06, $05, $03, $02, $06, $05, $03, $02, $06, $05, $03, $02, $06, $05
.byte $03, $02, $0E, $0B, $07, $04, $09, $07, $05, $02, $08, $06, $04, $02, $07, $05
.byte $04, $02, $0A, $08, $05, $03, $09, $07, $05, $02, $0B, $08, $06, $03, $08, $06
.byte $04, $02, $08, $06, $04, $02, $08, $06, $04, $02, $08, $06, $04, $02, $08, $06
.byte $04, $02, $10, $0C, $08, $04, $0B, $08, $06, $03, $0A, $08, $05, $03, $09, $07
.byte $05, $02, $0C, $09, $06, $03, $0B, $08, $06, $03, $0D, $0A, $07, $03, $09, $07
.byte $05, $02, $08, $06, $04, $02, $08, $06, $04, $02, $0A, $08, $05, $03, $09, $07


; EF00 - bank 7
.byte $05, $02, $0F, $0B, $08, $04, $0C, $09, $06, $03, $0C, $09, $06, $03, $0C, $09
.byte $06, $03, $0C, $09, $06, $03, $0C, $09, $06, $03, $18, $18, $18, $12, $11, $13
.byte $12, $0F, $12, $0F, $0E, $15, $13, $17, $10, $14, $00, $00, $10, $0F, $1A, $0A
.byte $03, $03, $03, $03, $01, $02, $02, $02, $00, $02, $00, $00, $00, $00, $00, $00
.byte $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
.byte $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
.byte $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
.byte $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
.byte $48, $8A, $48, $98, $48, $20, $8A, $FE, $20, $34, $FE, $20, $4E, $DB, $20, $00
.byte $FA, $A0, $02, $20, $3F, $FE, $20, $7E, $FE, $68, $A8, $68, $AA, $68, $40


; EF9F
  PHA
  TXA
  PHA
  TYA
  PHA
  LDA $0106
  BMI :++
  LDA $0106
  ORA #$80
  STA $0106
  JSR $FD5D
  LDA $F7
  AND $F5
  AND #$10
  BEQ :+
  JSR $FE8A
  JMP @reset_stack_pointer
;   LDX #$FF
;   TXS
@return_from_stack_shenanigans:
  JMP $F09F
: JSR $FE34
  JSR $DB4E
  JSR $FA00
  LDA #$00
  STA $0106
: PLA
  TAY
  PLA
  TAX
  PLA
  RTI

; EFD9
  PHA
  TXA
  PHA
  TYA
  PHA
  JSR $FE34
  nops 3 ; LDA $2002
  nops 3 ; LDA $2002
  LDA $0106
  BMI :+
  LDA $0106
  ORA #$80
  STA $0106
  JSR $F700
  NOP
  NOP
  NOP
  LDA $0106
  AND #$01
  BEQ :++
  JSR $E49C
  JSR $DB7A
  JSR $DF58
  JSR $DB4E
  LDA #$00
  STA $0106
: PLA
  TAY
  PLA
  TAX
  PLA
  RTI


; F018 - lots of stuff here
: JSR $DB4E
  LDY #$02
  JSR $FE3F
  ; wait for vblank
: BIT RDNMI ; PpuStatus_2002
  BVC :-

  JSR $DB42
  JSR $FA00
  LDA $0106
  AND #$7F
  STA $0106
  JMP $F012
  JSR $FE8A
  LDA #$06
  JSR $FF08
  
  ; setting PPU Mask to 0 is equivelent to TM
  LDA #$00
  STA $FE
  STZ TM ; STA PpuMask_2001

  JSR $FCB5
  LDX #$00
  JSR $DB02
  JSR $F8D6
  JSR $DB2E
  JSR $DBF1
  JSR $FE34
  LDA #$0A
  STA $069B
  LDA #$00
  STA $069C
  STA $06EB
  STA $06EC
  LDA #$00
  STA $C2
  STA $C3
  STA $C4
  STA $70
  STA $76
  JSR $DB4E
  LDX #$00
: LDA $F036,X
  STA $13,X
  INX
  CPX #$02
  BCC :-
  LDA #$00
  JSR $FA15
  JSR $F9A4
  BCC :+
  NOP
  NOP
  NOP
  NOP
  NOP
  NOP
  NOP
  NOP
  JMP $F09F
: JSR $F926

.byte $20, $78, $F3, $20
.byte $BC, $F3, $20, $2C, $FB, $20, $4A, $FB, $20, $59, $FB, $20, $77, $FB, $20, $3B
.byte $FB, $20, $78, $F5, $20, $91, $F9, $EE, $8A, $01, $20, $87, $E4, $A5, $70, $29
.byte $FC, $85, $70, $A9, $C0, $8D, $00, $01, $20, $7E, $FE, $A9, $00, $8D, $06, $01
.byte $A5, $78, $29, $01, $F0, $3B, $AD, $00, $07, $29, $02, $D0, $34

nops 3 ;  LDA $2002
nops 3 ;  LDA $2002

.byte $20, $BF, $FC, $A9, $C0, $8D, $00, $01, $20, $7E, $FE, $A9, $00
.byte $8D, $06, $01, $A5, $78, $29, $FE, $85, $78, $A5, $78, $09, $20, $85, $78, $A9


; F100 - bank 7
.byte $1C, $2C, $76, $00, $30, $08, $A5, $79, $29, $0F, $A8, $B9, $6B, $F3, $20, $15
.byte $FA, $A9, $00, $8D, $6D, $00, $20, $E6, $F6, $A9, $00, $8D, $7A, $06, $8D, $7B
.byte $06, $24, $70, $50, $06, $20, $A6, $FD, $4C, $2E, $F1, $20, $5D, $FD, $20, $60
.byte $DB, $20, $3A, $F6, $EA, $EA, $EA, $EA, $EA, $EA

; F13A
  JSR $FB10
: BIT RDNMI
  BVC :-
  JSR $DB42

.byte $2C, $B2, $06, $70, $50, $AD, $B0, $06, $F0, $0A, $C9
.byte $01, $F0, $12, $C9, $02, $F0, $17, $D0, $2A, $20, $81, $D9, $20, $0C, $C0, $20
.byte $9C, $F8, $4C, $97, $F1, $20, $81, $D9, $20, $0C, $C0, $4C, $97, $F1, $20, $81
.byte $D9, $20, $0C, $C0, $20, $A3, $CD, $20, $A4, $AA, $20, $EF, $FA, $20, $00, $E5
.byte $4C, $97, $F1, $20, $81, $D9, $20, $50, $FA, $20, $DB, $DB, $20, $50, $F7, $A9
.byte $00, $8D, $B0, $06, $4C, $9A, $F1, $EE, $B0, $06, $A9, $01, $8D, $06, $01, $20
.byte $00, $FA

; game busy loop
JML @new_game_busy_loop
@new_game_busy_loop_return:
NOP
  ; LDA $0106
  ; BNE $A7F1A2



.byte $AD, $B0, $06, $D0, $8E, $EE, $9E, $06, $A5
.byte $78, $30, $08, $D0, $03, $4C, $11, $F1, $4C, $BA, $F0, $A5, $78, $29, $DF, $85
.byte $78, $A5, $70, $29, $60, $D0, $0F, $A5, $78, $29, $01, $AA, $B5, $7A, $30, $0C
.byte $20, $23, $F2, $4C, $9F, $F0, $20, $23, $F2, $4C, $9F, $F0, $20, $8A, $FE, $E6
.byte $71, $A6, $71, $E0, $08, $90, $2C, $24, $76, $10, $1C, $70, $13, $A9, $07, $85
.byte $71, $20, $89, $DB, $29, $07, $85, $77, $A9, $C0, $8D, $E0, $07, $4C, $B1, $F0


; F200 - bank 7
.byte $A9, $00, $85, $76, $8D, $E0, $07, $20, $86, $FB, $A5, $70, $29, $7F, $85, $70
.byte $4C, $36, $F0, $BD, $1B, $F2, $85, $7A, $4C, $AB, $F0, $01, $02, $03, $04, $05
.byte $07, $06, $08, $20, $8A, $FE, $20, $B5, $FC, $20, $F1, $DB, $20, $2E, $DB, $A9
.byte $0A, $20, $E2, $FE, $A9, $0A, $8D, $9B, $06, $20, $74, $DF, $A9, $02, $20, $24
.byte $DE, $20, $7C, $F9, $20, $A0, $FC, $20, $8A, $FE, $20, $34, $FE, $20, $BF, $FC
.byte $A9, $40, $8D, $00, $01, $20, $7E, $FE, $A9, $00, $85, $76, $8D, $E0, $07, $20
.byte $CC, $F8, $A9, $20, $20, $4D, $FE, $20, $5D, $FD, $A5, $F5, $05, $F6, $29, $C0
.byte $F0, $F5, $60, $00, $01, $02, $03, $59, $02, $59, $02, $45, $02, $30, $02, $20
.byte $02, $10, $02, $00, $02, $50, $01, $59, $02, $07, $01, $02, $03, $04, $05, $00
.byte $06, $0A, $09, $0B, $0C, $00, $01, $02, $03, $04, $05, $06, $07, $0A, $08, $09
.byte $08, $08, $0B, $0B, $0B, $0B, $0B, $0B, $0B, $06, $0B, $0D, $0D, $18, $0B, $19
.byte $19, $19, $19, $19, $19, $19, $19, $19, $0B, $18, $18, $18, $18, $18, $18, $18
.byte $0D, $0D, $0E, $0D, $13, $13, $0E, $10, $0D, $0D, $0F, $0D, $0D, $0C, $0B, $0D
.byte $0B, $0B, $0B, $0B, $10, $0B, $00, $00, $0C, $00, $00, $00, $00, $00, $00, $00
.byte $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $01, $02, $03, $04
.byte $05, $06, $07, $0A, $09, $08, $0B, $0C, $0D, $0D, $0D, $1A, $0D, $1A, $0D, $00


; F300 - bank 7
.byte $0D, $0D, $0D, $0E, $0D, $18, $11, $12, $13, $14, $15, $10, $16, $17, $19, $0E
.byte $0E, $0E, $0E, $80, $20, $30, $40, $50, $70, $60, $10, $0A, $00, $00, $00, $00
.byte $00, $0D, $10, $00, $0D, $0D, $0D, $F0, $0D, $00, $00, $0E, $0D, $0D, $0D, $0D
.byte $0D, $0D, $0D, $0D, $0D, $0D, $0D, $0E, $0E, $0E, $0E, $0E, $0E, $0E, $0E, $0E
.byte $0E, $0E, $0E, $00, $01, $02, $03, $04, $06, $05, $07, $0B, $00, $08, $00, $00
.byte $0B, $0D, $00, $00, $00, $00, $00, $07, $00, $00, $00, $0B, $00, $08, $00, $00
.byte $0B, $0D, $0B, $00, $00, $00, $00, $07, $00, $00, $00, $14, $15, $1A, $16, $18
.byte $17, $1B, $19, $1F, $1D, $1E, $1D, $1D

; F378 - Main Loop
  LDA #$00
  STA $6E
  LDA #$00
  STA $C2
  STA $C3
  STA $C4
  LDA #$25
  JSR $FA15
  JSR $FCB5
  JSR $FE8A
  JSR $DB2E
  JSR $DBF1
  JSR $FE34
  JSR $FCB5
  LDA #$08
  JSR $FA65
  JSR $DBBB
  JSR $FCA0
  JSR $FE8A
  JSR $FCBF
  LDA #$80
  STA $0100
  LDA #$00
  STA $0106
  JSR $FE7E
;   Busy loop for title screen
@old_title_busy_loop:
  JMP @title_screen_busy

.byte $A9, $00, $AE, $B1
.byte $06, $E0, $03, $90, $03, $8D, $B1, $06, $A9, $01, $AE, $EA, $06, $E0, $03, $90
.byte $03, $8D, $EA, $06, $A5, $70, $09, $01, $85, $70, $A9, $00, $85, $6E, $20, $8A
.byte $FE, $20, $B5, $FC, $20, $2E, $DB, $20, $F1, $DB, $20, $34, $FE, $A9, $00, $8D
.byte $1F, $03, $A5, $70, $09, $02, $85, $70, $A9, $0D, $20, $65, $FA, $A5, $70, $29


; F400 - bank 7
.byte $FD, $85, $70, $20, $A0, $FC, $20, $8A, $FE, $20, $4E, $DB, $20, $BF, $FC, $A9
.byte $25, $20, $15, $FA, $A9, $04, $8D, $17, $06, $A9, $00, $8D, $7A, $06, $8D, $7B
.byte $06, $EE, $9E, $06, $20, $00, $FA, $20, $5D, $FD, $20, $A0, $FC, $20, $8A, $FE
.byte $20, $34, $FE, $20, $9A, $F4, $20, $21, $F5, $20, $4E, $DB, $20, $B5, $FB, $20
.byte $50, $FA, $20, $DB, $DB, $A5, $F5, $29, $10, $F0, $C9, $AE, $B1, $06, $BD, $97
.byte $F4, $09, $01, $85, $70, $BD, $94, $F4, $85, $6F, $A9, $80, $85, $6E, $E0, $00
.byte $F0, $07, $E0, $01, $F0, $17, $4C, $82, $F4, $24, $70, $30, $04, $A9, $00, $85
.byte $71, $A9, $80, $85, $7B, $A5, $71, $18, $69, $01, $85, $7A, $60, $A0, $08, $84
.byte $71, $60, $A9, $00, $85, $7A, $85, $7B, $AE, $EA, $06, $BD, $91, $F4, $85, $71
.byte $60, $09, $0A, $0B, $01, $02, $01, $00, $20, $40, $A5, $F5, $29, $2F, $F0, $7E
.byte $48, $A9, $10, $20, $15, $FA, $68, $A8, $29, $04, $F0, $1C, $A9, $00, $20, $3E
.byte $F5, $EE, $B1, $06, $AD, $B1, $06, $C9, $03, $90, $05, $A9, $02, $8D, $B1, $06
.byte $A9, $3F, $20, $3E, $F5, $4C, $1E, $F5, $98, $29, $08, $F0, $17, $A9, $00, $20
.byte $3E, $F5, $CE, $B1, $06, $10, $05, $A9, $00, $8D, $B1, $06, $A9, $3F, $20, $3E
.byte $F5, $4C, $1E, $F5, $98, $29, $01, $F0, $1C, $A9, $00, $20, $55, $F5, $EE, $EA
.byte $06, $AD, $EA, $06, $C9, $03, $90, $05, $A9, $02, $8D, $EA, $06, $A9, $3F, $20


; F500 - bank 7
.byte $55, $F5, $4C, $1E, $F5, $98, $29, $02, $F0, $14, $A9, $00, $20, $55, $F5, $CE
.byte $EA, $06, $10, $05, $A9, $00, $8D, $EA, $06, $A9, $3F, $20, $55, $F5, $60, $A9
.byte $3F, $AD, $9E, $06, $29, $10, $F0, $0B, $A9, $3F, $20, $3E, $F5, $A9, $3F, $20
.byte $55, $F5, $60, $A9, $00, $20, $3E, $F5, $A9, $00, $20, $55, $F5, $60

; F53E
  JSL handle_arrow_game_type
;   PHA
;   LDA $06B1
;   ASL A
;   TAX
;   LDA $F56D,X
;   STA VMADDH ; PpuAddr_2006
;   LDA $F56C,X
;   STA VMADDL ; PpuAddr_2006
;   PLA
;   STA VMDATAL ; PpuData_2007
  nops 18
  RTS

  ; F555
  JSL handle_arrow_difficulty
;   PHA
;   LDA $06EA
;   ASL A
;   TAX
;   LDA $F573,X
;   STA VMADDH ; PpuAddr_2006
;   LDA $F572,X
;   STA VMADDL ; PpuAddr_2006
;   PLA
;   STA VMDATAL ; PpuData_2007
nops 18
  RTS

.byte $E3, $20 ; $28
.byte $23, $21 ; $29
.byte $63, $21 ; $29

.byte $23, $23 ; $2B
.byte $2A, $23 ; $2B
.byte $33, $23 ; $2B

.byte $A5, $78, $29, $EF, $85, $78, $20, $B5
.byte $FC, $20, $2E, $DB, $20, $F1, $DB, $A2, $7E, $20, $2E, $DB, $20, $F1, $DB, $A9
.byte $00, $85, $78, $8D, $70, $01, $8D, $71, $01, $A9, $80, $8D, $B2, $06, $A5, $70
.byte $29, $60, $F0, $20, $24, $70, $50, $18, $A2, $07, $A9, $00, $9D, $6A, $01, $9D
.byte $72, $01, $CA, $10, $F7, $AE, $EA, $06, $BD, $BD, $F5, $D0, $12, $09, $0B, $0C
.byte $A9, $0A, $D0, $0B, $A6, $71, $BD, $89, $F2, $24, $76, $10, $02, $A9, $14, $85
.byte $79, $20, $FA, $FA, $A9, $00, $85, $C2, $85, $C4, $A9, $80, $85, $C3, $A5, $79
.byte $20, $65, $FA, $24, $76, $10, $09, $A9, $07, $85, $79, $A9, $02, $20, $4D, $FE
.byte $20, $05, $FB, $20, $A0, $FC, $20, $8A, $FE, $20, $BF, $FC, $A9, $20, $20, $15


; F600 - bank 7
.byte $FA, $A9, $41, $85, $78, $A9, $FF, $85, $8A, $A9, $FF, $85, $8D, $24, $70, $70
.byte $04, $85, $86, $85, $87, $A9, $00, $8D, $9E, $06, $A9, $80, $8D, $C3, $00, $A9
.byte $00, $8D, $14, $03, $8D, $B0, $06, $8D, $EB, $07, $8D, $EC, $07, $8D, $ED, $07
.byte $8D, $EE, $07, $8D, $F7, $07, $8D, $F8, $07, $60, $A5, $F5, $24, $70, $50, $02
.byte $05, $F7, $29, $10, $F0, $14, $AD, $B2, $06, $49, $40, $8D, $B2, $06, $A9, $0E
.byte $2C, $B2, $06, $70, $02, $A9, $FF, $20, $15, $FA, $60, $AD, $00, $07, $29, $02
.byte $D0, $F9, $60, $A5, $70, $29, $20, $F0, $1F, $E0, $0A, $D0, $1B, $AD, $7B, $00
.byte $29, $0F, $48, $AD, $7A, $00, $29, $0F, $A8, $68, $18, $79, $8C, $F6, $A8, $B9
.byte $95, $F6, $8D, $AE, $06, $8D, $AF, $06, $AD, $AE, $06, $60, $00, $09, $12, $1B
.byte $24, $2D, $36, $3F, $48, $0D, $10, $0D, $0E, $0D, $13, $0D, $13, $0E, $10, $10
.byte $11, $12, $11, $16, $11, $16, $12, $0D, $11, $0D, $0F, $0D, $14, $0D, $14, $0F
.byte $0E, $12, $0F, $0E, $0F, $15, $0F, $15, $0E, $0D, $11, $0D, $0F, $0D, $14, $0D
.byte $14, $0F, $13, $16, $14, $15, $14, $13, $14, $13, $15, $0D, $11, $0D, $0F, $0D
.byte $14, $0D, $14, $0F, $13, $16, $14, $15, $14, $13, $14, $13, $15, $0E, $12, $0F
.byte $0E, $0F, $15, $0F, $15, $0E, $AE, $71, $01, $F0, $0A, $CE, $70, $01, $D0, $05
.byte $A2, $00, $8E, $71, $01, $BD, $FC, $F6, $8D, $17, $06, $60, $04, $0C, $14, $1C


; F700 - bank 7
.byte $2C, $E0, $07, $10, $48, $70, $1B, $AD, $E0, $07, $29, $DF, $8D, $E0, $07, $AD
.byte $E1, $07, $20, $4C, $F8, $AE, $E1, $07, $BD, $4E, $F7, $20, $D8, $F7, $20, $B5
.byte $F9, $60, $2C, $76, $00, $70, $19, $AD, $E0, $07, $29, $20, $F0, $1F, $AD, $E0
.byte $07, $29, $DF, $8D, $E0, $07, $AD, $E1, $07, $20, $D8, $F7, $20, $B5, $F9, $60
.byte $A9, $00, $8D, $E0, $07, $A9, $02, $20, $D8, $F7, $20, $B5, $F9, $60, $02, $03
.byte $2C, $E0, $07, $10, $14, $70, $13, $CE, $E2, $07, $D0, $0D, $AD, $E1, $07, $49
.byte $01, $8D, $E1, $07, $A9, $01, $8D, $E2, $07, $60, $AD, $E3, $07, $D0, $29, $CE
.byte $E2, $07, $D0, $59, $20, $89, $DB, $29, $07, $AA, $BD, $CE, $F7, $8D, $E3, $07
.byte $A9, $01, $8D, $E2, $07, $AD, $E1, $07, $49, $01, $8D, $E1, $07, $AD, $E0, $07
.byte $09, $20, $8D, $E0, $07, $4C, $CD, $F7, $CE, $E2, $07, $D0, $30, $AD, $E1, $07
.byte $AA, $29, $01, $F0, $19, $BD, $D6, $F7, $8D, $E2, $07, $AD, $E1, $07, $49, $01
.byte $8D, $E1, $07, $AD, $E0, $07, $09, $20, $8D, $E0, $07, $4C, $CD, $F7, $CE, $E3
.byte $07, $D0, $E2, $20, $89, $DB, $29, $3F, $09, $01, $8D, $E2, $07, $60, $01, $02
.byte $03, $02, $04, $02, $01, $03, $01, $01

; F7D8
  ASL A
  TAY
  LDA $F804,Y
  STA $74
  LDA $F805,Y
  STA $75

  ; write palette data
  JSL load_palette_from_74
  nops 27

;   LDA #$3F
;   STA PpuAddr_2006
;   LDA #$00
;   STA PpuAddr_2006
;   LDA $FF
;   AND #$FB
;   STA $FF

;   STA PpuControl_2000
;   LDY #$00
;   LDA ($74),Y
;   STA PpuData_2007
;   INY
;   CPY #$10
;   BNE $F7F9

  RTS


; F804 - bank 7
.byte $0C, $F8, $1C, $F8, $2C, $F8, $3C, $F8, $0F, $10, $14, $03
.byte $0F, $10, $04, $14, $0F, $14, $14, $03, $0F, $23, $13, $10, $30, $10, $24, $04
.byte $30, $14, $30, $0F, $30, $14, $24, $04, $30, $33, $14, $00, $0F, $28, $16, $06
.byte $0F, $30, $33, $11, $0F, $33, $16, $06, $0F, $30, $10, $28, $30, $10, $24, $04
.byte $30, $14, $30, $0F, $30, $14, $24, $04, $30, $33, $14, $00

  ASL
  TAY
  LDA $F878,Y
  STA $74
  LDA $F879,Y
  STA $75

  JSL load_sprite_palette_from_74
  nops 27
;   LDA #$3F
;   STA PpuAddr_2006
;   LDA #$10
;   STA PpuAddr_2006
;   LDA $FF
;   AND #$FB
;   STA $FF
;   STA PpuControl_2000
;   LDY #$00
;   LDA ($74),Y
;   STA PpuData_2007
;   INY
;   CPY #$10
;   BNE $A7F86D
  RTS

.byte $7C, $F8, $8C, $F8, $0F, $07, $2A, $37
.byte $0F, $07, $2C, $36, $0F, $0F, $30, $27, $0F, $0F, $30, $10, $0F, $0F, $30, $10
.byte $0F, $0F, $30, $10, $0F, $0F, $30, $27, $0F, $0F, $30, $10, $24, $70, $50, $27
.byte $A0, $00, $AE, $6F, $00, $CA, $BD, $EB, $07, $29, $C0, $D9, $C8, $F8, $F0, $0E
.byte $CA, $10, $F3, $A9, $00, $99, $68, $01, $C8, $C0, $02, $90, $E5, $60, $B9, $CA
.byte $F8, $99, $68, $01, $4C, $B8, $F8, $60, $80, $C0, $11, $12, $A2, $07, $A9, $FF
.byte $95, $F1, $CA, $10, $FB, $60, $A0, $00, $A2, $02, $A9, $BF, $85, $4F, $A9, $05
.byte $85, $50, $20, $64, $F9, $A0, $17, $A2, $06, $A9, $B1, $85, $4F, $A9, $06, $85
.byte $50, $20, $64, $F9, $A0, $B2, $A2, $06, $A9, $EA, $85, $4F, $A9, $06, $85, $50


; F900 - bank 7
.byte $20, $64, $F9, $A0, $E0, $A2, $07, $A9, $F0, $85, $4F, $A9, $07, $85, $50, $20
.byte $64, $F9, $A9, $00, $8D, $EB, $06, $8D, $EF, $06, $8D, $FC, $06, $8D, $FD, $06
.byte $A9, $FF, $8D, $FF, $06, $60, $A9, $00, $8D, $ED, $06, $8D, $EE, $06, $8D, $B1
.byte $06, $A9, $01, $8D, $EA, $06, $A0, $00, $A2, $01, $A9, $90, $85, $4F, $A9, $01
.byte $85, $50, $20, $64, $F9, $A0, $BF, $A2, $05, $A9, $17, $85, $4F, $A9, $06, $85
.byte $50, $20, $64, $F9, $A0, $ED, $A2, $06, $A9, $FF, $85, $4F, $A9, $06, $85, $50
.byte $20, $64, $F9, $60, $86, $4E, $A9, $00, $85, $4D, $91, $4D, $C8, $D0, $02, $E6
.byte $4E, $A6, $4E, $E4, $50, $D0, $F3, $C4, $4F, $D0, $EF, $60

; attributes, needs to be updated.
  LDY #$40
  LDA #$2B
  STA VMADDH
  LDA #$C0
  STA VMADDL
  LDA #$FF
: STA VMDATAL
  DEY
  BPL :-
  RTS

.byte $A2, $06, $BD, $9D, $F9, $9D, $F0, $07, $CA, $10, $F7, $60, $4B, $55, $4D
.byte $41, $47, $41, $49, $A2, $06, $BD, $F0, $07, $DD, $9D, $F9, $D0, $05, $CA, $10
.byte $F5, $38, $60, $18, $60

  LDA #$3F
;   STA $2006
  LDA #$00
;   STA $2006
;   STA $2006
;   STA $2006
  nops 12
  RTS

.byte $A2, $00, $AD, $F7, $07, $0D, $F8, $07, $F0, $09
.byte $AD, $9E, $06, $29, $04, $F0, $02, $A2, $C5, $A9, $20, $8D, $06, $20, $A9, $AF
.byte $8D, $06, $20, $8E, $07, $20, $60, $00, $00, $00, $00, $00, $00, $00, $00, $00
.byte $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00


; FA00 - bank 7
.byte $AD, $F9, $BF, $8D, $D9, $06, $A9, $00, $20, $08, $FF, $20, $03, $80, $AD, $D9
.byte $06, $20, $08, $FF, $60, $8D, $01, $07, $AD, $F9, $BF, $48, $A9, $00, $20, $08
.byte $FF, $20, $00, $80, $68, $20, $08, $FF, $60, $AA, $AD, $F9, $BF, $48, $8A, $48
.byte $A9, $02, $20, $08, $FF, $68, $20, $00, $80, $4C, $24, $FA, $48, $A9, $03, $20
.byte $08, $FF, $68, $20, $09, $80, $08, $48, $A9, $06, $20, $08, $FF, $68, $28, $60
.byte $AA, $AD, $F9, $BF, $48, $8A, $48, $A9, $05, $20, $08, $FF, $68, $20, $00, $80
.byte $68, $20, $08, $FF, $60, $48, $AA, $BD, $95, $F2, $20, $E2, $FE, $BD, $C0, $F2
.byte $8D, $AE, $06, $8D, $AF, $06, $20, $63, $F6, $20, $BC, $FE, $BD, $EB, $F2, $8D
.byte $9B, $06, $BD, $13, $F3, $E0, $0A, $D0, $03, $AD, $FC, $06, $8D, $9C, $06, $8D
.byte $9D, $06, $BD, $43, $F3, $8D, $EB, $06, $8D, $EC, $06, $20, $74, $DF, $20, $8A
.byte $FE, $68, $20, $00, $D2, $60, $48, $A9, $06, $20, $08, $FF, $68, $60, $AD, $F9
.byte $BF, $C9, $03, $F0, $0E, $48, $A9, $03, $20, $08, $FF, $20, $24, $80, $68, $20
.byte $08, $FF, $60, $20, $24, $80, $60, $AD, $F9, $BF, $C9, $03, $F0, $10, $48, $A9
.byte $03, $20, $08, $FF, $20, $27, $80, $68, $08, $20, $08, $FF, $28, $60, $20, $27
.byte $80, $60, $48, $A9, $03, $20, $08, $FF, $68, $20, $0C, $80, $4C, $A6, $FA, $A9
.byte $03, $20, $08, $FF, $20, $00, $80, $4C, $A6, $FA, $A9, $04, $20, $08, $FF, $20


; FB00 - bank 7
.byte $06, $80, $4C, $A6, $FA, $A9, $04, $20, $08, $FF, $20, $1B, $80, $4C, $A6, $FA
.byte $A9, $04, $20, $08, $FF, $20, $1E, $80, $4C, $A6, $FA, $AD, $F9, $BF, $48, $A9
.byte $03, $20, $08, $FF, $20, $03, $80, $68, $20, $08, $FF, $60, $AD, $F9, $BF, $48
.byte $A9, $04, $20, $08, $FF, $20, $00, $80, $4C, $27, $FB, $AD, $F9, $BF, $48, $A9
.byte $04, $20, $08, $FF, $20, $24, $80, $4C, $27, $FB, $AD, $F9, $BF, $48, $A9, $04
.byte $20, $08, $FF, $20, $27, $80, $4C, $27, $FB, $AD, $F9, $BF, $48, $A9, $04, $20
.byte $08, $FF, $20, $2A, $80, $4C, $27, $FB, $AD, $F9, $BF, $48, $A9, $01, $20, $08
.byte $FF, $20, $00, $80, $4C, $27, $FB, $AD, $F9, $BF, $48, $A9, $04, $20, $08, $FF
.byte $20, $2D, $80, $4C, $27, $FB, $AD, $F9, $BF, $48, $A9, $01, $20, $08, $FF, $20
.byte $0F, $80, $68, $20, $08, $FF, $60, $48, $A9, $03, $20, $08, $FF, $68, $20, $0F
.byte $80, $4C, $A6, $FA, $AD, $F9, $BF, $48, $A9, $03, $20, $08, $FF, $20, $06, $80
.byte $68, $20, $08, $FF, $60, $AD, $F9, $BF, $48, $A9, $03, $20, $08, $FF, $20, $12
.byte $80, $68, $20, $08, $FF, $60, $AD, $F9, $BF, $48, $A9, $03, $20, $08, $FF, $20
.byte $15, $80, $68, $20, $08, $FF, $60, $AD, $F9, $BF, $48, $A9, $03, $20, $08, $FF
.byte $20, $18, $80, $68, $20, $08, $FF, $60, $AD, $F9, $BF, $48, $A9, $03, $20, $08
.byte $FF, $20, $1B, $80, $68, $20, $08, $FF, $60, $A5, $70, $29, $60, $D0, $20, $A5


; FC00 - bank 7
.byte $F6, $29, $80, $F0, $07, $A5, $78, $09, $81, $85, $78, $60, $A5, $F6, $29, $40
.byte $F0, $0D, $AD, $F8, $00, $29, $04, $4A, $4A, $AA, $A9, $00, $9D, $80, $00, $60
.byte $A5, $70, $29, $60, $D0, $F9, $A5, $F6, $29, $08, $F0, $09, $A9, $07, $85, $71
.byte $A9, $00, $8D, $80, $00, $60, $BA, $EC, $FF, $06, $B0, $03, $8E, $FF, $06, $60



; very little free space here, use sparingly
@reset_stack_pointer:
    setAXY16
    LDX #$01FF
    TXS
    setAXY8
    JMP @return_from_stack_shenanigans

@new_game_busy_loop:
  JSL turn_off_nmi_dont_store
  JSL snes_busy_loop
  LDA NMITIMEN_STATUS
  STA NMITIMEN
: LDA $0106
  BNE :-
  JML @new_game_busy_loop_return

@title_screen_busy:
    JSL snes_busy_loop
:   JMP :-

@new_busy_loop:
    JSL turn_off_nmi_dont_store
    JSL snes_busy_loop
    LDA NMITIMEN_STATUS
    STA NMITIMEN
:   BRA :-
    BRA @after_old_busy_loop

;.byte $00, $00, $00, $00, $00;, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
;.byte $00, $00, $00, $00, $00, $00;, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
; .byte $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00;, $00, $00
.byte $00, $00, $00, $00, $00;, $00, $00, $00, $00, $00, $00 , $00, $00, $00, $00, $00
.byte $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
.byte $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00

; fca0
  PHA
  LDA $0100
  PHA
  LDA #$00
  STA $0100
;   LDA PPU_CONTROL_STATUS
;   ORA #$80
;   STA PPU_CONTROL_STATUS
;   STA PpuControl_2000
  JSL turn_on_nmi_and_store
  STA NMITIMEN
  LDA PPU_CONTROL_STATUS
@old_busy_loop:
  BNE @new_busy_loop
@after_old_busy_loop:
; FCB5
LDA PPU_MASK_STATUS
AND #$E7
; STA $FE
; STA PpuMask_2001
JSL change_ppu_mask_status
nops 1

RTS

.byte $A5
.byte $FE, $09, $18, $D0, $F4, $A5, $FE, $29, $EF, $4C, $B9, $FC, $A5, $FE, $09, $10
.byte $D0, $E7, $A5, $FE, $29, $F7, $4C, $B9, $FC, $A5, $FE, $09, $08, $D0, $DA

; FCDF
  nops 9; LDA $2002
;   LDA NES_H_SCROLL
;   STA BG1HOFS ; $2005
;   LDA NES_V_SCROLL
;   STA BG1VOFS ; $2005
  JSL update_HV_OFFS

;   LDA PPU_CONTROL_STATUS
;   STA $2000
  JSL handle_ppu_nmi_status_without_storing
  nops 1

  RTS


; FCF2
  STA $00
  STX $01
  STY $02
  nops 3 ; LDA PpuStatus_2002

;   LDA PPU_CONTROL_STATUS
;   AND #$FB
;   STA PpuControl_2000
;   STA PPU_CONTROL_STATUS
  JSL set_vm_increment_mode_1
  nops 1
  ; nops 2
  
  LDA $00
  AND #$27
  STA VMADDH ; PpuAddr_2006
  LDY #$00
  STY VMADDL ; PpuAddr_2006
  LDX #$04
  CMP #$20
  BCS :+
  LDX $02
: LDY #$00
  LDA $01
: STA VMDATAL ; PpuData_2007
  DEY
  BNE :-
  DEX
  BNE :-
  LDY $02
  LDA $00
  AND #$27
  CMP #$20
  BCC :++
  ADC #$02
  STA VMADDH
  LDA #$C0
  STA VMADDL
  LDX #$40
  STY VMDATAL
: DEX
  BNE :-
: LDX $01
  RTS

; FD40 - bank 7
.byte $48, $8A, $84, $01, $18, $E5, $01, $AA, $68, $A0, $00, $84, $00, $91, $00, $88
.byte $D0, $FB, $C6, $01, $E8, $D0, $F6, $60, $20, $C2, $FD, $F0, $06, $20, $C2, $FD
.byte $20, $E4, $FD, $A2, $01, $B5, $F5, $A8, $55, $F7, $35, $F5, $95, $F5, $94, $F7
.byte $CA, $10, $F2, $60, $20, $C2, $FD, $A4, $F5, $A5, $F6, $48, $20, $C2, $FD, $68
.byte $C5, $F6, $D0, $F3, $C4, $F5, $D0, $EF, $F0, $D9, $20, $C2, $FD, $20, $E4, $FD
.byte $A4, $F5, $A5, $F6, $48, $20, $C2, $FD, $20, $E4, $FD, $68, $C5, $F6, $D0, $F0
.byte $C4, $F5, $D0, $EC, $F0, $BD, $20, $C2, $FD, $A5, $00, $85, $F7, $A5, $01, $85
.byte $F8, $A2, $03, $B5, $F5, $A8, $55, $F1, $35, $F5, $95, $F5, $94, $F1, $CA, $10
.byte $F2, $60, $A6, $FB, $E8, $8E, $16, $40, $CA, $8E, $16, $40, $A2, $08, $AD, $16
.byte $40, $4A, $26, $F5, $4A, $26, $00, $AD, $17, $40, $4A, $26, $F6, $4A, $26, $01
.byte $CA, $D0, $EB, $60, $A5, $00, $05, $F5, $85, $F5, $A5, $01, $05, $F6, $85, $F6
.byte $60, $A9, $11, $A2, $10, $A0, $12, $86, $00, $D6, $00, $10, $05, $A9, $09, $95


; FE00 - bank 7
.byte $00, $98, $AA, $B5, $00, $F0, $02, $D6, $00, $CA, $E4, $00, $D0, $F5, $60, $8A
.byte $48, $98, $48, $A2, $13, $A0, $02, $B5, $00, $29, $02, $85, $00, $B5, $01, $29
.byte $02, $45, $00, $18, $F0, $01, $38, $76, $00, $E8, $88, $D0, $FA, $68, $A8, $68
.byte $AA, $A5, $13, $60

; fe34 - dma oam - we don't need to do anything for this, we handle it in bank_snes
;   LDA #$00
;   STA $2003
;   LDA #$02
;   STA $4014
  nops 10
  RTS

.byte $A6
.byte $00, $A2, $FE, $EA, $CA, $D0, $FC, $C5, $00, $88, $D0, $F3, $60, $85, $0F, $A5
.byte $0F, $29, $F0, $F0, $18, $A0, $FA, $20, $3F, $FE, $20, $3F, $FE, $20, $3F, $FE
.byte $20, $3F, $FE, $A5, $0F, $38, $E9, $10, $85, $0F, $4C, $4F, $FE, $A5, $0F, $29
.byte $0F, $F0, $0A, $A0, $64, $20, $3F, $FE, $38, $E9, $01, $D0, $F6, $60

; enable and store nmi
  PHA
;   LDA $FF
;   ORA #$80
;   STA $FF
;   STA $2000
  JSL turn_on_nmi_and_store
  STA NMITIMEN
  LDA PPU_CONTROL_STATUS
  
  PLA
  RTS

; FE8A
@nes_disable_vblank:
  PHA

;   LDA PPU_CONTROL_STATUS
;   AND #$7F
;   STA PPU_CONTROL_STATUS
;   STA $2000  

  JSL turn_off_nmi_and_store
  nops 5
  
  PLA
  RTS

@configure_registers:
  STA $69
  SEI
  LDA PPU_CONTROL_STATUS
  PHA

  JSR @nes_disable_vblank

  LDA $69
  ; this sets config registers, we'll handle this manually
  ; Super Dodge Ball sets them to $1E
;   STA $9FFF
;   LSR A
;   STA $9FFF
;   LSR A
;   STA $9FFF
;   LSR A
;   STA $9FFF
;   LSR A
;   STA $9FFF
  nops 19

; reset the ppu status back to what it was
  PLA

;   STA PPU_CONTROL_STATUS
;   STA $2000
  JSL change_ppu_vblank_status
  nops 1

  CLI
  RTS


  STA $69
  SEI
  LDA $FF
  PHA
  JSR $FE8A

  LDA $69
  STA CHR_BANK_BANK_TO_LOAD
  JSL bankswitch_obj_chr_data
;   STA $BFFF
;   LSR A
;   STA $BFFF
;   LSR A
;   STA $BFFF
;   LSR A
;   STA $BFFF
;   LSR A
;   STA $BFFF
  nops 12
  PLA
;   STA $FF
;   STA PpuControl_2000
  JSL change_ppu_vblank_status
  NOP
  CLI
  RTS


  STA $69
  SEI

  LDA $FF
  PHA
  JSR $FE8A

  LDA $69
;   STA CHR_BANK_BANK_TO_LOAD
;   JSL bankswitch_bg_chr_data
STA BG_CHR_BANK_SWITCH
JSL check_for_bg_chr_bankswap

;   STA $DFFF
;   LSR
;   STA $DFFF
;   LSR
;   STA $DFFF
;   LSR
;   STA $DFFF
;   LSR
;   STA $DFFF
  nops 12


  PLA

;   STA $FF
;   STA $2000
  JSL change_ppu_vblank_status
  NOP

  CLI
  RTS

; FF08 
  PHA
  SEI

;   LDA PPU_CONTROL_STATUS
;   AND #$7F
;   STA $2000
  JSL turn_off_nmi_dont_store
  nops 1

  PLA
  STA ACTIVE_NES_BANK

  LDA PPU_CONTROL_STATUS
  PHA
  AND #$7F
  STA PPU_CONTROL_STATUS

  LDA ACTIVE_NES_BANK

; Old bank switch code (19 bytes)
;   STA $FFFF
;   LSR
;   STA $FFFF
;   LSR
;   STA $FFFF
;   LSR
;   STA $FFFF
;   LSR
;   STA $FFFF
;   
; new bank switch code, also 19 bytes, coincidently
  INC
  ORA #$A0
  PHA
  PLB
  STA BANK_SWITCH_DB
  LDA #.lobyte(@bank_switch_jump)
  STA BANK_SWITCH_LB
  LDA #.hibyte(@bank_switch_jump)
  STA BANK_SWITCH_HB
  JML (BANK_SWITCH_LB)

@bank_switch_jump: 
  PLA  
;   STA PPU_CONTROL_STATUS
;   STA $2000
  jsl change_ppu_vblank_status
  nops 1
  CLI
  RTS

@nes_nmi:
  BIT $0100
  BPL :++
  BVC :+
  JMP $EFD9
: JMP $EF9F
: BVC :+
  JMP $EF80

: JSL turn_off_nmi_and_store
;   LDA PPU_CONTROL_STATUS
;   AND #$7F
;   STA PPU_CONTROL_STATUS
;   STA $2000 ; PpuControl_2000
  nops 5
 
  nops 2 ; LDA $2002 ; PpuStatus_2002
  PLA   ; one extra PLA because we put 4 bytes on the stack instead of 3 on NMI
  PLA
  PLA
  PLA
  PLA
  STA $0100
  PLA
  RTS

; NES Reset Vector sends us here
@nes_ff61:
  SEI
;   sets the background to address $1000
  LDA #$10
  STA $2000 ; PpuControl_2000
  STA PPU_CONTROL_STATUS

  CLD
  ; show background and sprites in leftmost 8 pixels
  ; I don't know that we can do antyhing for this, so skip it
  nops 2 ; LDA #$06
  nops 2 ; STA PPU_MASK_STATUS
  nops 3 ; STA $2001 ; PpuMask_2001

  ; wait for 2 vblanks
  LDX #$02
: LDA RDNMI ; LDA $2002 ; PpuStatus_2002
  BPL :-
  DEX
  BNE :-

  STX $FD
  STX $FC
  STX $FB
  STX $4016 ; Ctrl1_4016
  LDA #$FF
  STA $F9
  LDA #$40
  STA $4017 ; Ctrl2_FrameCtr_4017

  LDA #$0F
  ; SOUND THING
  STA $4015 ; ApuStatus_4015
; we set our stack pointer to 01FF instead
;   LDX #$FF
;   TXS
  nops 3
  LDA #$1E
  JSR $FE96
  LDA #$C0
  STA $0100
  LDA #$50
  STA $0101
  LDA $0102
  CMP #$35
  BNE @nes_ffc2
  LDA $0103
  CMP #$53
  BEQ :+
  CMP #$AC
  BNE @nes_ffc2
  LDA #$53
  STA $0103
: JSR $FCDF

@nes_ffbe:
  CLI
  JMP $F036
@nes_ffc2:
  LDA #$00
  LDX #$F8
: STA $0000,X
  DEX
  BNE :-
  NOP
  NOP
  ; NOP
  NOP
  NOP
  NOP
  NOP
  NOP
  NOP
  NOP
  LDA #$00
  STA $FD
  STA $FC
  JMP @nes_ffbe

.byte $00
.byte $00, $00, $00, $00, $00, $00, $00, $00

@nes_reset_vector:
  INC $FFF1
  NOP
  NOP
  NOP
  JMP $FF61

.byte $EA, $80, $EF, $9F, $EF, $D9, $EF, $36, $F0, $3A, $FF, $E8, $FF, $9E, $EF
